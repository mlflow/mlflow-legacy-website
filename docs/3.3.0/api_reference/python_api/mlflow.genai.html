

<!DOCTYPE html>
<!-- source: docs/source/python_api/mlflow.genai.rst -->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>mlflow.genai</title>
  
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="canonical" href="https://mlflow.org/docs/latest/python_api/mlflow.genai.html">
  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  

  
    
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer',"GTM-N6WMTTJ");</script>
        <!-- End Google Tag Manager -->
    
  
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-16857946923"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'AW-16857946923');
  </script>
  <!-- Eng gtag -->

  

  
  <meta name="docsearch:docusaurus_tag" content="default" data-rh="true">
  <meta name="docusaurus_tag" content="default" data-rh="true">
  <meta name="docusaurus_version" content="current" data-rh="true">
  <meta name="docsearch:version" content="current" data-rh="true">
  <meta name="docusaurus_locale" content="en" data-rh="true">
  <meta name="docsearch:language" content="en" data-rh="true">

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/grids.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/mobile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/simple-cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/tabs.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MLflow 3.3.0 documentation" href="../index.html"/>
        <link rel="up" title="Python API" href="index.html"/>
        <link rel="next" title="mlflow.groq" href="/mlflow.groq.html"/>
        <link rel="prev" title="mlflow.gemini" href="/mlflow.gemini.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>
<script type="text/javascript" src="../_static/documentation_options.js"></script>
<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/languagesections.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script type="text/javascript" src="../_static/runllm.js"></script>

<body class="wy-body-for-nav" role="document">
  
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6WMTTJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <div class="header-container">
  <style scoped>
    .header-container {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px;

      background-color: #fff;
      box-shadow: 0 1px 2px 0 #0000001a;
    }

    .logo-container {
      display: flex;
      gap: 12px;
      flex-direction: row;
      white-space: nowrap;
      align-items: center;
      justify-content: center;
    }

    a:hover {
      text-decoration: none;
      color: #0194e2;
    }
  </style>
  <div class="logo-container">
    <i
      data-toggle="wy-nav-top"
      class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"
    ></i>
    <a href="../index.html" class="wy-nav-top-logo">
      <img
        src="../_static/MLflow-logo-final-black.png"
        alt="MLflow"
      />
    </a>
    <a
      style="overflow: hidden; text-overflow: ellipsis"
      class="header-link"
      href="/docs/latest"
      >Main Docs</a
    >
    <span style="overflow: hidden; text-overflow: ellipsis" class="header-link"
      >API Documentation</span
    >
  </div>
  <span class="header-link">3.3.0</span>
</div>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  </form>
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html">Home</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mlflow.html">mlflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.html#mlflow-tracing-apis">MLflow Tracing APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.html#mlflow-logged-model-apis">MLflow Logged Model APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.ag2.html">mlflow.ag2</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.agno.html">mlflow.agno</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.anthropic.html">mlflow.anthropic</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.artifacts.html">mlflow.artifacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.autogen.html">mlflow.autogen</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.bedrock.html">mlflow.bedrock</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.catboost.html">mlflow.catboost</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.client.html">mlflow.client</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.config.html">mlflow.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.crewai.html">mlflow.crewai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.data.html">mlflow.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.deployments.html">mlflow.deployments</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.diviner.html">mlflow.diviner</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.dspy.html">mlflow.dspy</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.entities.html">mlflow.entities</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.environment_variables.html">mlflow.environment_variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.gateway.html">mlflow.gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.gemini.html">mlflow.gemini</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">mlflow.genai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.groq.html">mlflow.groq</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.h2o.html">mlflow.h2o</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.johnsnowlabs.html">mlflow.johnsnowlabs</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.keras.html">mlflow.keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.langchain.html">mlflow.langchain</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.lightgbm.html">mlflow.lightgbm</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.litellm.html">mlflow.litellm</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.llama_index.html">mlflow.llama_index</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.metrics.html">mlflow.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.mistral.html">mlflow.mistral</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.models.html">mlflow.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.onnx.html">mlflow.onnx</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.openai.html">mlflow.openai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.paddle.html">mlflow.paddle</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pmdarima.html">mlflow.pmdarima</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.projects.html">mlflow.projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.promptflow.html">mlflow.promptflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.prophet.html">mlflow.prophet</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pydantic_ai.html">mlflow.pydantic_ai</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyfunc.html">mlflow.pyfunc</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pyspark.ml.html">mlflow.pyspark.ml</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.pytorch.html">mlflow.pytorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sagemaker.html">mlflow.sagemaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sentence_transformers.html">mlflow.sentence_transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.server.html">mlflow.server</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.shap.html">mlflow.shap</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.sklearn.html">mlflow.sklearn</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.smolagents.html">mlflow.smolagents</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spacy.html">mlflow.spacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.spark.html">mlflow.spark</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.statsmodels.html">mlflow.statsmodels</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.system_metrics.html">mlflow.system_metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tensorflow.html">mlflow.tensorflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.tracing.html">mlflow.tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.transformers.html">mlflow.transformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.types.html">mlflow.types</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.utils.html">mlflow.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.webhooks.html">mlflow.webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="mlflow.xgboost.html">mlflow.xgboost</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#log-levels">Log Levels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../typescript_api/index.html">TypeScript API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth/python-api.html">MLflow Authentication Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth/rest-api.html">MLflow Authentication REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest-api.html">REST API</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="index.html">Python API</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>mlflow.genai</li>
    
    
    <!-- <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/mlflow/mlflow/blob/master/docs/source/python_api/mlflow.genai.rst" class="fa fa-github"> Edit on GitHub</a>
    </li> -->
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="module-mlflow.genai">
<span id="mlflow-genai"></span><h1>mlflow.genai<a class="headerlink" href="#module-mlflow.genai" title="Permalink to this headline"> </a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.Agent">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">Agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">_Agent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#Agent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Agent" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The agent configuration, used for generating responses in the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.Agent.agent_name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">agent_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.Agent.agent_name" title="Permalink to this definition"> </a></dt>
<dd><p>The name of the agent.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.Agent.model_serving_endpoint">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">model_serving_endpoint</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.Agent.model_serving_endpoint" title="Permalink to this definition"> </a></dt>
<dd><p>The model serving endpoint used by the agent.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">LabelingSession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">_LabelingSession</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#LabelingSession"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.LabelingSession" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A session for labeling items in the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.add_dataset">
<span class="sig-name descname"><span class="pre">add_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">record_ids</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.labeling.labeling.LabelingSession"><span class="pre">mlflow.genai.labeling.labeling.LabelingSession</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#LabelingSession.add_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.LabelingSession.add_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Add a dataset to the labeling session.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_name</strong> – The name of the dataset.</p></li>
<li><p><strong>record_ids</strong> – Optional. The individual record ids to be added to the session. If not
provided, all records in the dataset will be added.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The updated labeling session.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession">LabelingSession</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.add_traces">
<span class="sig-name descname"><span class="pre">add_traces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">traces</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Trace" title="mlflow.entities.Trace"><span class="pre">Trace</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pd.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession"><span class="pre">LabelingSession</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#LabelingSession.add_traces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.LabelingSession.add_traces" title="Permalink to this definition"> </a></dt>
<dd><p>Add traces to the labeling session.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>traces</strong> – Can be either:
a) a pandas DataFrame with a ‘trace’ column. The ‘trace’ column should contain
either <cite>mlflow.entities.Trace</cite> objects or their json string representations.
b) an iterable of <cite>mlflow.entities.Trace</cite> objects.
c) an iterable of json string representations of <cite>mlflow.entities.Trace</cite> objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The updated labeling session.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession">LabelingSession</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.agent">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">agent</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.agent" title="Permalink to this definition"> </a></dt>
<dd><p>The agent used to generate responses for the items in the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.assigned_users">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">assigned_users</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.assigned_users" title="Permalink to this definition"> </a></dt>
<dd><p>The users assigned to label items in the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.custom_inputs">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">custom_inputs</span></span><em class="property"><span class="pre">:</span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.custom_inputs" title="Permalink to this definition"> </a></dt>
<dd><p>Custom inputs used in the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.enable_multi_turn_chat">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">enable_multi_turn_chat</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.enable_multi_turn_chat" title="Permalink to this definition"> </a></dt>
<dd><p>Whether multi-turn chat is enabled for the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.experiment_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">experiment_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.experiment_id" title="Permalink to this definition"> </a></dt>
<dd><p>The experiment ID associated with the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.label_schemas">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">label_schemas</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.label_schemas" title="Permalink to this definition"> </a></dt>
<dd><p>The label schemas used in the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.labeling_session_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">labeling_session_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.labeling_session_id" title="Permalink to this definition"> </a></dt>
<dd><p>The unique identifier of the labeling session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.mlflow_run_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">mlflow_run_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.mlflow_run_id" title="Permalink to this definition"> </a></dt>
<dd><p>The MLflow run ID associated with the session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.name" title="Permalink to this definition"> </a></dt>
<dd><p>The name of the labeling session.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.review_app_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">review_app_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.review_app_id" title="Permalink to this definition"> </a></dt>
<dd><p>The review app ID associated with the session.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.set_assigned_users">
<span class="sig-name descname"><span class="pre">set_assigned_users</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assigned_users</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.labeling.labeling.LabelingSession"><span class="pre">mlflow.genai.labeling.labeling.LabelingSession</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#LabelingSession.set_assigned_users"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.LabelingSession.set_assigned_users" title="Permalink to this definition"> </a></dt>
<dd><p>Set the assigned users for the labeling session.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>assigned_users</strong> – The list of users to assign to the session.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The updated labeling session.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession">LabelingSession</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.sync">
<span class="sig-name descname"><span class="pre">sync</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#LabelingSession.sync"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.LabelingSession.sync" title="Permalink to this definition"> </a></dt>
<dd><p>Sync the traces and expectations from the labeling session to a dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>to_dataset</strong> – The name of the dataset to sync traces and expectations to.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.LabelingSession.url">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">url</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.LabelingSession.url" title="Permalink to this definition"> </a></dt>
<dd><p>The URL of the labeling session in the review app.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">ReviewApp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">_ReviewApp</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#ReviewApp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.ReviewApp" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A review app is used to collect feedback from stakeholders for a given experiment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.add_agent">
<span class="sig-name descname"><span class="pre">add_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_serving_endpoint</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.labeling.labeling.ReviewApp"><span class="pre">mlflow.genai.labeling.labeling.ReviewApp</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#ReviewApp.add_agent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.ReviewApp.add_agent" title="Permalink to this definition"> </a></dt>
<dd><p>Add an agent to the review app to be used to generate responses.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_name</strong> – The name of the agent.</p></li>
<li><p><strong>model_serving_endpoint</strong> – The model serving endpoint to be used by the agent.</p></li>
<li><p><strong>overwrite</strong> – Whether to overwrite an existing agent with the same name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The updated review app.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.ReviewApp">ReviewApp</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.agents">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">agents</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Agent" title="mlflow.genai.labeling.labeling.Agent"><span class="pre">mlflow.genai.labeling.labeling.Agent</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.ReviewApp.agents" title="Permalink to this definition"> </a></dt>
<dd><p>The agents to be used to generate responses.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.experiment_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">experiment_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.ReviewApp.experiment_id" title="Permalink to this definition"> </a></dt>
<dd><p>The ID of the experiment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.label_schemas">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">label_schemas</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">'_LabelSchema'</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.ReviewApp.label_schemas" title="Permalink to this definition"> </a></dt>
<dd><p>The label schemas to be used in the review app.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.remove_agent">
<span class="sig-name descname"><span class="pre">remove_agent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agent_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.labeling.labeling.ReviewApp"><span class="pre">mlflow.genai.labeling.labeling.ReviewApp</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling/labeling.html#ReviewApp.remove_agent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.ReviewApp.remove_agent" title="Permalink to this definition"> </a></dt>
<dd><p>Remove an agent from the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_name</strong> – The name of the agent to remove.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The updated review app.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.ReviewApp">ReviewApp</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.review_app_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">review_app_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.ReviewApp.review_app_id" title="Permalink to this definition"> </a></dt>
<dd><p>The ID of the review app.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.ReviewApp.url">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">url</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.ReviewApp.url" title="Permalink to this definition"> </a></dt>
<dd><p>The URL of the review app for stakeholders to provide feedback.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.Scorer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">Scorer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.main.BaseModel</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.aggregations">
<span class="sig-name descname"><span class="pre">aggregations</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.Scorer.aggregations" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.filter_string">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">filter_string</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.Scorer.filter_string" title="Permalink to this definition"> </a></dt>
<dd><p>This function may change or be removed in a future release without warning.</p>
<p>Get the filter string for this scorer.</p>
<dl class="field-list">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.kind">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">kind</span></span><em class="property"><span class="pre">:</span> <span class="pre">mlflow.genai.scorers.base.ScorerKind</span></em><a class="headerlink" href="#mlflow.genai.Scorer.kind" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.Scorer.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.model_dump">
<span class="sig-name descname"><span class="pre">model_dump</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.model_dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.model_dump" title="Permalink to this definition"> </a></dt>
<dd><p>Override model_dump to include source code.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.Scorer.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.model_validate">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">model_validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.model_validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.model_validate" title="Permalink to this definition"> </a></dt>
<dd><p>Override model_validate to reconstruct scorer from source code.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.Scorer.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.register">
<span class="sig-name descname"><span class="pre">register</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.register"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.register" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Register this scorer with the MLflow server.</p>
<p>This method registers the scorer for use with automatic trace evaluation in the
specified experiment. Once registered, the scorer can be started to begin
evaluating traces automatically.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Optional registered name for the scorer. If not provided, the current <cite>name</cite>
property value will be used as a registered name.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the MLflow experiment to register the scorer for.
If None, uses the currently active experiment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Scorer instance with server registration information.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span>

<span class="c1"># Register a built-in scorer</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;my_genai_app&quot;</span><span class="p">)</span>
<span class="n">registered_scorer</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;relevance_scorer&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registered scorer: </span><span class="si">{</span><span class="n">registered_scorer</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Register a custom scorer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">scorer</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">custom_length_check</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span>


<span class="n">registered_custom</span> <span class="o">=</span> <span class="n">custom_length_check</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;output_length_checker&quot;</span><span class="p">,</span> <span class="n">experiment_id</span><span class="o">=</span><span class="s2">&quot;12345&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expectations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.run" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.sample_rate">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">sample_rate</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.Scorer.sample_rate" title="Permalink to this definition"> </a></dt>
<dd><p>This function may change or be removed in a future release without warning.</p>
<p>Get the sample rate for this scorer. Available when registered for monitoring.</p>
<dl class="field-list">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.scorers.ScorerSamplingConfig" title="mlflow.genai.scorers.base.ScorerSamplingConfig"><span class="pre">mlflow.genai.scorers.base.ScorerSamplingConfig</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.start" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Start registered scoring with the specified sampling configuration.</p>
<p>This method activates automatic trace evaluation for the scorer. The scorer will
evaluate traces based on the provided sampling configuration, including the
sample rate and optional filter criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Optional scorer name. If not provided, uses the scorer’s registered
name or default name.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the MLflow experiment containing the scorer.
If None, uses the currently active experiment.</p></li>
<li><p><strong>sampling_config</strong> – Configuration object containing:
- sample_rate: Fraction of traces to evaluate (0.0 to 1.0). Required.
- filter_string: Optional MLflow search_traces compatible filter string.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Scorer instance with updated sampling configuration.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span><span class="p">,</span> <span class="n">ScorerSamplingConfig</span>

<span class="c1"># Start scorer with 50% sampling rate</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;my_genai_app&quot;</span><span class="p">)</span>
<span class="n">scorer</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
<span class="n">active_scorer</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span><span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scorer is evaluating </span><span class="si">{</span><span class="n">active_scorer</span><span class="o">.</span><span class="n">sample_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">}</span><span class="s2">% of traces&quot;</span><span class="p">)</span>

<span class="c1"># Start scorer with filter to only evaluate specific traces</span>
<span class="n">filtered_scorer</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
    <span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span>
        <span class="n">sample_rate</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">filter_string</span><span class="o">=</span><span class="s2">&quot;YOUR_FILTER_STRING&quot;</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.stop" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Stop registered scoring by setting sample rate to 0.</p>
<p>This method deactivates automatic trace evaluation for the scorer while keeping
the scorer registered. The scorer can be restarted later using the start() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Optional scorer name. If not provided, uses the scorer’s registered name
or default name.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the MLflow experiment containing the scorer.
If None, uses the currently active experiment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Scorer instance with sample rate set to 0.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span><span class="p">,</span> <span class="n">ScorerSamplingConfig</span>

<span class="c1"># Start and then stop a scorer</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;my_genai_app&quot;</span><span class="p">)</span>
<span class="n">scorer</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
<span class="n">active_scorer</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span><span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scorer is active: </span><span class="si">{</span><span class="n">active_scorer</span><span class="o">.</span><span class="n">sample_rate</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Stop the scorer</span>
<span class="n">stopped_scorer</span> <span class="o">=</span> <span class="n">active_scorer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scorer is active: </span><span class="si">{</span><span class="n">stopped_scorer</span><span class="o">.</span><span class="n">sample_rate</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># The scorer remains registered and can be restarted later</span>
<span class="n">restarted_scorer</span> <span class="o">=</span> <span class="n">stopped_scorer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span>
    <span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span><span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.Scorer.update">
<span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.scorers.ScorerSamplingConfig" title="mlflow.genai.scorers.base.ScorerSamplingConfig"><span class="pre">mlflow.genai.scorers.base.ScorerSamplingConfig</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#Scorer.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.Scorer.update" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Update the sampling configuration for this scorer.</p>
<p>This method modifies the sampling rate and/or filter criteria for an already
registered scorer. It can be used to dynamically adjust how many traces are
evaluated or change the filtering criteria without stopping and restarting
the scorer.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Optional scorer name. If not provided, uses the scorer’s registered name
or default name.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the MLflow experiment containing the scorer.
If None, uses the currently active experiment.</p></li>
<li><p><strong>sampling_config</strong> – Configuration object containing:
- sample_rate: New fraction of traces to evaluate (0.0 to 1.0). Optional.
- filter_string: New MLflow search_traces compatible filter string. Optional.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Scorer instance with updated configuration.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span><span class="p">,</span> <span class="n">ScorerSamplingConfig</span>

<span class="c1"># Start scorer with initial configuration</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;my_genai_app&quot;</span><span class="p">)</span>
<span class="n">scorer</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
<span class="n">active_scorer</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span><span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span>

<span class="c1"># Update to increase sampling rate during high traffic</span>
<span class="n">updated_scorer</span> <span class="o">=</span> <span class="n">active_scorer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span><span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updated sample rate: </span><span class="si">{</span><span class="n">updated_scorer</span><span class="o">.</span><span class="n">sample_rate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Update to add filtering criteria</span>
<span class="n">filtered_scorer</span> <span class="o">=</span> <span class="n">updated_scorer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="n">sampling_config</span><span class="o">=</span><span class="n">ScorerSamplingConfig</span><span class="p">(</span><span class="n">filter_string</span><span class="o">=</span><span class="s2">&quot;YOUR_FILTER_STRING&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Added filter: </span><span class="si">{</span><span class="n">filtered_scorer</span><span class="o">.</span><span class="n">filter_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.ScorerScheduleConfig">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">ScorerScheduleConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scorer</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scheduled_scorer_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_string</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scheduled_scorers.html#ScorerScheduleConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.ScorerScheduleConfig" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>A scheduled scorer configuration for automated monitoring of generative AI applications.</p>
<p>Scheduled scorers are used to automatically evaluate traces logged to MLflow experiments
by production applications. They are part of <a class="reference external" href="https://docs.databricks.com/aws/en/generative-ai/agent-evaluation/monitoring">Databricks Lakehouse Monitoring for GenAI</a>,
which helps track quality metrics like groundedness, safety, and guideline adherence
alongside operational metrics like volume, latency, and cost.</p>
<p>When configured, scheduled scorers run automatically in the background to evaluate
a sample of traces based on the specified sampling rate and filter criteria. The
Assessments are displayed in the Traces tab of the MLflow experiment and can be used to
identify quality issues in production.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scorer</strong> – The scorer function to run on sampled traces. Must be either a built-in
scorer (e.g., Safety, Correctness) or a function decorated with &#64;scorer.
Subclasses of Scorer are not supported.</p></li>
<li><p><strong>scheduled_scorer_name</strong> – The name for this scheduled scorer configuration
within the experiment. This name must be unique among all scheduled scorers
in the same experiment.
We recommend using the scorer’s name (e.g., scorer.name) for consistency.</p></li>
<li><p><strong>sample_rate</strong> – The fraction of traces to evaluate, between 0.0 and 1.0. For example,
0.1 means 10% of traces will be randomly selected for evaluation.</p></li>
<li><p><strong>filter_string</strong> – An optional MLflow search_traces compatible filter string to apply
before sampling traces. Only traces matching this filter will be considered
for evaluation. Uses the same syntax as mlflow.search_traces().</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Safety</span><span class="p">,</span> <span class="n">scorer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scheduled_scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">ScorerScheduleConfig</span>

<span class="c1"># Using a built-in scorer</span>
<span class="n">safety_config</span> <span class="o">=</span> <span class="n">ScorerScheduleConfig</span><span class="p">(</span>
    <span class="n">scorer</span><span class="o">=</span><span class="n">Safety</span><span class="p">(),</span>
    <span class="n">scheduled_scorer_name</span><span class="o">=</span><span class="s2">&quot;production_safety&quot;</span><span class="p">,</span>
    <span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>  <span class="c1"># Evaluate 20% of traces</span>
    <span class="n">filter_string</span><span class="o">=</span><span class="s2">&quot;trace.status = &#39;OK&#39;&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="c1"># Using a custom scorer</span>
<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">response_length</span><span class="p">(</span><span class="n">outputs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">outputs</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">100</span>


<span class="n">length_config</span> <span class="o">=</span> <span class="n">ScorerScheduleConfig</span><span class="p">(</span>
    <span class="n">scorer</span><span class="o">=</span><span class="n">response_length</span><span class="p">,</span>
    <span class="n">scheduled_scorer_name</span><span class="o">=</span><span class="s2">&quot;adequate_length&quot;</span><span class="p">,</span>
    <span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>  <span class="c1"># Evaluate 10% of traces</span>
    <span class="n">filter_string</span><span class="o">=</span><span class="s2">&quot;trace.status = &#39;OK&#39;&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Scheduled scorers are executed automatically by Databricks and do not need to be
manually triggered. The Assessments appear in the Traces tab of the MLflow
experiment. Only traces logged directly to the experiment are monitored; traces
logged to individual runs within the experiment are not evaluated.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This API is in Beta and may change or be removed in a future release without warning.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.ScorerScheduleConfig.filter_string">
<span class="sig-name descname"><span class="pre">filter_string</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.ScorerScheduleConfig.filter_string" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.ScorerScheduleConfig.sample_rate">
<span class="sig-name descname"><span class="pre">sample_rate</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#mlflow.genai.ScorerScheduleConfig.sample_rate" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.ScorerScheduleConfig.scheduled_scorer_name">
<span class="sig-name descname"><span class="pre">scheduled_scorer_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.ScorerScheduleConfig.scheduled_scorer_name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.ScorerScheduleConfig.scorer">
<span class="sig-name descname"><span class="pre">scorer</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></em><a class="headerlink" href="#mlflow.genai.ScorerScheduleConfig.scorer" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.create_dataset">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">create_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uc_table_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.datasets.EvaluationDataset" title="mlflow.genai.datasets.evaluation_dataset.EvaluationDataset"><span class="pre">mlflow.genai.datasets.evaluation_dataset.EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets.html#create_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.create_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Create a dataset with the given name and associate it with the given experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uc_table_name</strong> – The UC table name of the dataset.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the experiment to associate the dataset with. If not provided,
the current experiment is inferred from the environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.create_labeling_session">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">create_labeling_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assigned_users</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">agent</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_schemas</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_multi_turn_chat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_inputs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.labeling.labeling.LabelingSession"><span class="pre">mlflow.genai.labeling.labeling.LabelingSession</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling.html#create_labeling_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.create_labeling_session" title="Permalink to this definition"> </a></dt>
<dd><p>Create a new labeling session in the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the labeling session.</p></li>
<li><p><strong>assigned_users</strong> – The users that will be assigned to label items in the session.</p></li>
<li><p><strong>agent</strong> – The agent to be used to generate responses for the items in the session.</p></li>
<li><p><strong>label_schemas</strong> – The label schemas to be used in the session.</p></li>
<li><p><strong>enable_multi_turn_chat</strong> – Whether to enable multi-turn chat labeling for the session.</p></li>
<li><p><strong>custom_inputs</strong> – Optional. Custom inputs to be used in the session.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The created labeling session.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession">LabelingSession</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.delete_dataset">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">delete_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uc_table_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets.html#delete_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.delete_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Delete the dataset with the given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uc_table_name</strong> – The UC table name of the dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.delete_labeling_session">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">delete_labeling_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">labeling_session</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.labeling.labeling.LabelingSession"><span class="pre">mlflow.genai.labeling.labeling.LabelingSession</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.labeling.labeling.ReviewApp"><span class="pre">mlflow.genai.labeling.labeling.ReviewApp</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling.html#delete_labeling_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.delete_labeling_session" title="Permalink to this definition"> </a></dt>
<dd><p>Delete a labeling session from the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>labeling_session</strong> – The labeling session to delete.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The review app.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.ReviewApp">ReviewApp</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.delete_prompt_alias">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">delete_prompt_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alias</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/prompts.html#delete_prompt_alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.delete_prompt_alias" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Delete an alias for a <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Prompt" title="mlflow.entities.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> in the MLflow Prompt Registry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the prompt.</p></li>
<li><p><strong>alias</strong> – The alias to delete for the prompt.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.evaluate">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">EvaluationDatasetTypes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_fn</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.models.html#mlflow.models.EvaluationResult" title="mlflow.models.evaluation.base.EvaluationResult"><span class="pre">mlflow.models.evaluation.base.EvaluationResult</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/evaluation/base.html#evaluate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.evaluate" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Evaluate the performance of a generative AI model/application using specified
data and scorers.</p>
<p>This function allows you to evaluate a model’s performance on a given dataset
using various scoring criteria. It supports both built-in scorers provided by
MLflow and custom scorers. The evaluation results include metrics and detailed
per-row assessments.</p>
<p>There are three different ways to use this function:</p>
<p><strong>1. Use Traces to evaluate the model/application.</strong></p>
<p>The <cite>data</cite> parameter takes a DataFrame with <cite>trace</cite> column, which contains a
single trace object corresponding to the prediction for the row. This dataframe
is easily obtained from the existing traces stored in MLflow, by using the
<a class="reference internal" href="mlflow.html#mlflow.search_traces" title="mlflow.search_traces"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.search_traces()</span></code></a> function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Correctness</span><span class="p">,</span> <span class="n">Safety</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># model_id is a string starting with &quot;m-&quot;, e.g. &quot;m-074689226d3b40bfbbdf4c3ff35832cd&quot;</span>
<span class="n">trace_df</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">search_traces</span><span class="p">(</span><span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;&lt;my-model-id&gt;&quot;</span><span class="p">)</span>

<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">trace_df</span><span class="p">,</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">Correctness</span><span class="p">(),</span> <span class="n">Safety</span><span class="p">()],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Built-in scorers will understand the model inputs, outputs, and other intermediate
information e.g. retrieved context, from the trace object. You can also access to
the trace object from the custom scorer function by using the <cite>trace</cite> parameter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">scorer</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">faster_than_one_second</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">trace</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">trace</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">execution_duration</span> <span class="o">&lt;</span> <span class="mi">1000</span>
</pre></div>
</div>
<p><strong>2. Use DataFrame or dictionary with “inputs”, “outputs”, “expectations” columns.</strong></p>
<p>Alternatively, you can pass inputs, outputs, and expectations (ground truth) as
a column in the dataframe (or equivalent list of dictionaries).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Correctness</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is MLflow?&quot;</span><span class="p">},</span>
            <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;MLflow is an ML platform&quot;</span><span class="p">,</span>
            <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="s2">&quot;MLflow is an ML platform&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is Spark?&quot;</span><span class="p">},</span>
            <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;I don&#39;t know&quot;</span><span class="p">,</span>
            <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="s2">&quot;Spark is a data engine&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">Correctness</span><span class="p">()],</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>3. Pass `predict_fn` and input samples (and optionally expectations).</strong></p>
<p>If you want to generate the outputs and traces on-the-fly from your input samples,
you can pass a callable to the <cite>predict_fn</cite> parameter. In this case, MLflow will
pass the inputs to the <cite>predict_fn</cite> as keyword arguments. Therefore, the “inputs”
column must be a dictionary with the parameter names as keys.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Correctness</span><span class="p">,</span> <span class="n">Safety</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">openai</span>

<span class="c1"># Create a dataframe with input samples</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is MLflow?&quot;</span><span class="p">}},</span>
        <span class="p">{</span><span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is Spark?&quot;</span><span class="p">}},</span>
    <span class="p">]</span>
<span class="p">)</span>


<span class="c1"># Define a predict function to evaluate. The &quot;inputs&quot; column will be</span>
<span class="c1"># passed to the prediction function as keyword arguments.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">predict_fn</span><span class="p">(</span><span class="n">question</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">()</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">question</span><span class="p">}],</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span>


<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">predict_fn</span><span class="o">=</span><span class="n">predict_fn</span><span class="p">,</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">Correctness</span><span class="p">(),</span> <span class="n">Safety</span><span class="p">()],</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <p>Dataset for the evaluation. Must be one of the following formats:</p>
<ul>
<li><p>An EvaluationDataset entity</p></li>
<li><p>Pandas DataFrame</p></li>
<li><p>Spark DataFrame</p></li>
<li><p>List of dictionaries</p></li>
</ul>
<p>The dataset must include either of the following columns:</p>
<ol class="arabic">
<li><dl>
<dt><cite>trace</cite> column that contains a single trace object corresponding</dt><dd><p>to the prediction for the row.</p>
<p>If this column is present, MLflow extracts inputs, outputs, assessments,
and other intermediate information e.g. retrieved context, from the trace
object and uses them for scoring. When this column is present, the
<cite>predict_fn</cite> parameter must not be provided.</p>
</dd>
</dl>
</li>
<li><p><cite>inputs</cite>, <cite>outputs</cite>, <cite>expectations</cite> columns.</p>
<blockquote>
<div><p>Alternatively, you can pass inputs, outputs, and expectations(ground
truth) as a column in the dataframe (or equivalent list of dictionaries).</p>
<ul>
<li><p>inputs (required): Column containing inputs for evaluation. The value
must be a dictionary. When <cite>predict_fn</cite> is provided, MLflow will pass
the inputs to the <cite>predict_fn</cite> as keyword arguments. For example,</p>
<ul>
<li><p>predict_fn: <cite>def predict_fn(question: str, context: str) -&gt; str</cite></p></li>
<li><p>inputs: <cite>{“question”: “What is MLflow?”, “context”: “MLflow is an ML platform”}</cite></p></li>
<li><p><cite>predict_fn</cite> will receive “What is MLflow?” as the first argument
(<cite>question</cite>) and “MLflow is an ML platform” as the second argument (<cite>context</cite>)</p></li>
</ul>
</li>
<li><p>outputs (optional): Column containing model or app outputs.
If this column is present, <cite>predict_fn</cite> must not be provided.</p></li>
<li><p>expectations (optional): Column containing a dictionary of ground truths.</p></li>
</ul>
</div></blockquote>
</li>
</ol>
<p>For list of dictionaries, each dict should follow the above schema.</p>
</p></li>
<li><p><strong>scorers</strong> – A list of Scorer objects that produces evaluation scores from
inputs, outputs, and other additional contexts. MLflow provides pre-defined
scorers, but you can also define custom ones.</p></li>
<li><p><strong>predict_fn</strong> – <p>The target function to be evaluated. The specified function will be
executed for each row in the input dataset, and outputs will be used for
scoring.</p>
<p>The function must emit a single trace per call. If it doesn’t, decorate
the function with &#64;mlflow.trace decorator to ensure a trace to be emitted.</p>
</p></li>
<li><p><strong>model_id</strong> – Optional model identifier (e.g. “m-074689226d3b40bfbbdf4c3ff35832cd”)
to associate with the evaluation results. Can be also set globally via the
<a class="reference internal" href="mlflow.html#mlflow.set_active_model" title="mlflow.set_active_model"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.set_active_model()</span></code></a> function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.models.EvaluationResult~</span></code> object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only supported on Databricks. The tracking URI must be
set to Databricks.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is not thread-safe. Please do not use it in multi-threaded
environments.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.get_dataset">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">get_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uc_table_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.datasets.EvaluationDataset" title="mlflow.genai.datasets.evaluation_dataset.EvaluationDataset"><span class="pre">mlflow.genai.datasets.evaluation_dataset.EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets.html#get_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.get_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Get the dataset with the given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uc_table_name</strong> – The UC table name of the dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.get_labeling_session">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">get_labeling_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.labeling.labeling.LabelingSession"><span class="pre">mlflow.genai.labeling.labeling.LabelingSession</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling.html#get_labeling_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.get_labeling_session" title="Permalink to this definition"> </a></dt>
<dd><p>Get a labeling session from the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>run_id</strong> – The mlflow run ID of the labeling session to get.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The labeling session.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession">LabelingSession</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.get_labeling_sessions">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">get_labeling_sessions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.labeling.labeling.LabelingSession"><span class="pre">mlflow.genai.labeling.labeling.LabelingSession</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling.html#get_labeling_sessions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.get_labeling_sessions" title="Permalink to this definition"> </a></dt>
<dd><p>Get all labeling sessions from the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The list of labeling sessions.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[<a class="reference internal" href="#mlflow.genai.LabelingSession" title="mlflow.genai.LabelingSession">LabelingSession</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.get_review_app">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">get_review_app</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.labeling.labeling.ReviewApp"><span class="pre">mlflow.genai.labeling.labeling.ReviewApp</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/labeling.html#get_review_app"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.get_review_app" title="Permalink to this definition"> </a></dt>
<dd><p>Gets or creates (if it doesn’t exist) the review app for the given experiment ID.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>experiment_id</strong> – Optional. The experiment ID for which to get the review app. If not provided,
the experiment ID is inferred from the current active environment.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The review app.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.ReviewApp">ReviewApp</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.load_prompt">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">load_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name_or_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_missing</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/prompts.html#load_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.load_prompt" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Load a <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Prompt" title="mlflow.entities.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> from the MLflow Prompt Registry.</p>
<p>The prompt can be specified by name and version, or by URI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name_or_uri</strong> – The name of the prompt, or the URI in the format “prompts:/name/version”.</p></li>
<li><p><strong>version</strong> – The version of the prompt (required when using name, not allowed when using URI).</p></li>
<li><p><strong>allow_missing</strong> – If True, return None instead of raising Exception if the specified prompt
is not found.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>

<span class="c1"># Load a specific version of the prompt</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">load_prompt</span><span class="p">(</span><span class="s2">&quot;my_prompt&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Load a specific version of the prompt by URI</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">load_prompt</span><span class="p">(</span><span class="s2">&quot;prompts:/my_prompt/1&quot;</span><span class="p">)</span>

<span class="c1"># Load a prompt version with an alias &quot;production&quot;</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">load_prompt</span><span class="p">(</span><span class="s2">&quot;prompts:/my_prompt@production&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.optimize_prompt">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">optimize_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_llm_params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.LLMParams" title="mlflow.genai.optimize.types.LLMParams"><span class="pre">mlflow.genai.optimize.types.LLMParams</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">EvaluationDatasetTypes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">EvaluationDatasetTypes</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerConfig" title="mlflow.genai.optimize.types.OptimizerConfig"><span class="pre">mlflow.genai.optimize.types.OptimizerConfig</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.optimize.PromptOptimizationResult" title="mlflow.genai.optimize.types.PromptOptimizationResult"><span class="pre">mlflow.genai.optimize.types.PromptOptimizationResult</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/optimize/base.html#optimize_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize_prompt" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Optimize a LLM prompt using the given dataset and evaluation metrics.
By default, the optimized prompt template is automatically registered as a new version of the
original prompt and optimization metrics are logged.
Currently, this API provides built-in support for DSPy’s MIPROv2 optimizer and
you can also implement custom optimization algorithms by extending BasePromptOptimizer class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_llm_params</strong> – Parameters for the the LLM that prompt is optimized for.
The model name can be specified in either format:
- <cite>&lt;provider&gt;:/&lt;model&gt;</cite> (e.g., “openai:/gpt-4o”)
- <cite>&lt;provider&gt;/&lt;model&gt;</cite> (e.g., “openai/gpt-4o”)</p></li>
<li><p><strong>prompt</strong> – The URI or Prompt object of the MLflow prompt to optimize.</p></li>
<li><p><strong>train_data</strong> – <p>Training dataset used for optimization.
The data must be one of the following formats:</p>
<ul>
<li><p>An EvaluationDataset entity</p></li>
<li><p>Pandas DataFrame</p></li>
<li><p>Spark DataFrame</p></li>
<li><p>List of dictionaries</p></li>
</ul>
<p>The dataset must include the following columns:</p>
<ul>
<li><p>inputs: A column containing single inputs in dict format.
Each input should contain keys matching the variables in the prompt template.</p></li>
<li><p>expectations: A column containing a dictionary
of ground truths for individual output fields.</p></li>
</ul>
</p></li>
<li><p><strong>scorers</strong> – List of scorers that evaluate the inputs, outputs and expectations.
Note: Trace input is not supported for optimization. Use inputs, outputs and
expectations for optimization. Also, pass the <cite>objective</cite> argument
when using scorers with string or <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feedback</span></code></a> type outputs.</p></li>
<li><p><strong>objective</strong> – A callable that computes the overall performance metric from individual
assessments. Takes a dict mapping assessment names to assessment scores and
returns a float value (greater is better).</p></li>
<li><p><strong>eval_data</strong> – Evaluation dataset with the same format as train_data. If not provided,
train_data will be automatically split into training and evaluation sets.</p></li>
<li><p><strong>optimizer_config</strong> – Configuration parameters for the optimizer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The optimization result including the optimized prompt.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.optimize.PromptOptimizationResult" title="mlflow.genai.optimize.PromptOptimizationResult">PromptOptimizationResult</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">scorer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">OptimizerConfig</span><span class="p">,</span> <span class="n">LLMParams</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">exact_match</span><span class="p">(</span><span class="n">expectations</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">outputs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">expectations</span> <span class="o">==</span> <span class="n">outputs</span>


<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">register_prompt</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;qa&quot;</span><span class="p">,</span>
    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;Answer the following question: {{question}}&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">optimize_prompt</span><span class="p">(</span>
    <span class="n">target_llm_params</span><span class="o">=</span><span class="n">LLMParams</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;openai:/gpt-4o-mini&quot;</span><span class="p">),</span>
    <span class="n">train_data</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">+1&quot;</span><span class="p">},</span> <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;answer&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">],</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">exact_match</span><span class="p">],</span>
    <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
    <span class="n">optimizer_config</span><span class="o">=</span><span class="n">OptimizerConfig</span><span class="p">(</span><span class="n">num_instruction_candidates</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">prompt</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.register_prompt">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">register_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_message</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response_format</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pydantic.main.BaseModel</span> <span class="p"><span class="pre">|</span></span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/prompts.html#register_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.register_prompt" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Register a new <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Prompt" title="mlflow.entities.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> in the MLflow Prompt Registry.</p>
<p>A <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Prompt" title="mlflow.entities.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> is a pair of name and
template content at minimum. With MLflow Prompt Registry, you can create, manage, and
version control prompts with the MLflow’s robust model tracking framework.</p>
<p>If there is no registered prompt with the given name, a new prompt will be created.
Otherwise, a new version of the existing prompt will be created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the prompt.</p></li>
<li><p><strong>template</strong> – <p>The template content of the prompt. Can be either:</p>
<ul>
<li><p>A string containing text with variables enclosed in double curly braces,
e.g. {{variable}}, which will be replaced with actual values by the <cite>format</cite> method.</p></li>
<li><p>A list of dictionaries representing chat messages, where each message has
‘role’ and ‘content’ keys (e.g., [{“role”: “user”, “content”: “Hello {{name}}”}])</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to use the prompt with a framework that uses single curly braces
e.g. LangChain, you can use the <cite>to_single_brace_format</cite> method to convert the
loaded prompt to a format that uses single curly braces.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">prompt</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">load_prompt</span><span class="p">(</span><span class="s2">&quot;my_prompt&quot;</span><span class="p">)</span>
<span class="n">langchain_format</span> <span class="o">=</span> <span class="n">prompt</span><span class="o">.</span><span class="n">to_single_brace_format</span><span class="p">()</span>
</pre></div>
</div>
</div>
</p></li>
<li><p><strong>commit_message</strong> – A message describing the changes made to the prompt, similar to a
Git commit message. Optional.</p></li>
<li><p><strong>tags</strong> – A dictionary of tags associated with the <strong>prompt version</strong>.
This is useful for storing version-specific information, such as the author of
the changes. Optional.</p></li>
<li><p><strong>response_format</strong> – Optional Pydantic class or dictionary defining the expected response
structure. This can be used to specify the schema for structured outputs from LLM calls.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Prompt" title="mlflow.entities.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> object that was created.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>

<span class="c1"># Register a text prompt</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">register_prompt</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;greeting_prompt&quot;</span><span class="p">,</span>
    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;Respond to the user&#39;s message as a {{style}} AI.&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Register a chat prompt with multiple messages</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">register_prompt</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;assistant_prompt&quot;</span><span class="p">,</span>
    <span class="n">template</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful {{style}} assistant.&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;{{question}}&quot;</span><span class="p">},</span>
    <span class="p">],</span>
    <span class="n">response_format</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;answer&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">}}},</span>
<span class="p">)</span>

<span class="c1"># Load and use the prompt</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">load_prompt</span><span class="p">(</span><span class="s2">&quot;greeting_prompt&quot;</span><span class="p">)</span>

<span class="c1"># Use the prompt in your application</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">openai</span>

<span class="n">openai_client</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">()</span>
<span class="n">openai_client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completion</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-4o-mini&quot;</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;friendly&quot;</span><span class="p">)},</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, how are you?&quot;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="c1"># Update the prompt with a new version</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">register_prompt</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;greeting_prompt&quot;</span><span class="p">,</span>
    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;Respond to the user&#39;s message as a {{style}} AI. {{greeting}}&quot;</span><span class="p">,</span>
    <span class="n">commit_message</span><span class="o">=</span><span class="s2">&quot;Add a greeting to the prompt.&quot;</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.scorer">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">scorer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#scorer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorer" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>A decorator to define a custom scorer that can be used in <code class="docutils literal notranslate"><span class="pre">mlflow.genai.evaluate()</span></code>.</p>
<p>The scorer function should take in a <strong>subset</strong> of the following parameters:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Source</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">inputs</span></code></p></td>
<td><p>A single input to the target model/app.</p></td>
<td><p>Derived from either dataset or trace.</p>
<ul class="simple">
<li><p>When the dataset contains <code class="docutils literal notranslate"><span class="pre">inputs</span></code> column, the value will be passed as is.</p></li>
<li><p>When traces are provided as evaluation dataset, this will be derived
from the <code class="docutils literal notranslate"><span class="pre">inputs</span></code> field of the trace (i.e. inputs captured as the
root span of the trace).</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">outputs</span></code></p></td>
<td><p>A single output from the target model/app.</p></td>
<td><p>Derived from either dataset, trace, or output of <code class="docutils literal notranslate"><span class="pre">predict_fn</span></code>.</p>
<ul class="simple">
<li><p>When the dataset contains <code class="docutils literal notranslate"><span class="pre">outputs</span></code> column, the value will be passed as is.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">predict_fn</span></code> is provided, MLflow will make a prediction using the
<code class="docutils literal notranslate"><span class="pre">inputs</span></code> and the <code class="docutils literal notranslate"><span class="pre">predict_fn</span></code> and pass the result as the <code class="docutils literal notranslate"><span class="pre">outputs</span></code>.</p></li>
<li><p>When traces are provided as evaluation dataset, this will be derived
from the <code class="docutils literal notranslate"><span class="pre">response</span></code> field of the trace (i.e. outputs captured as the
root span of the trace).</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expectations</span></code></p></td>
<td><p>Ground truth or any expectation for each prediction e.g., expected retrieved docs.</p></td>
<td><p>Derived from either dataset or trace.</p>
<ul class="simple">
<li><p>When the dataset contains <code class="docutils literal notranslate"><span class="pre">expectations</span></code> column, the value will be passed as is.</p></li>
<li><p>When traces are provided as evaluation dataset, this will be a dictionary
that contains a set of assessments in the format of
[assessment name]: [assessment value].</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trace</span></code></p></td>
<td><p>A trace object corresponding to the prediction for the row.</p></td>
<td><p>Specified as a <code class="docutils literal notranslate"><span class="pre">trace</span></code> column in the dataset, or generated during the prediction.</p></td>
</tr>
</tbody>
</table>
<p>The scorer function should return one of the following:</p>
<ul class="simple">
<li><p>A boolean value</p></li>
<li><p>An integer value</p></li>
<li><p>A float value</p></li>
<li><p>A string value</p></li>
<li><p>A single <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feedback</span></code></a> object</p></li>
<li><p>A list of <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feedback</span></code></a> objects</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The metric name will be determined by the scorer function’s name or a custom name
specified in the <cite>name</cite> parameter for the scorer.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The scorer function to be decorated.</p></li>
<li><p><strong>name</strong> – The name of the scorer.</p></li>
<li><p><strong>aggregations</strong> – <p>A list of aggregation functions to apply to the scorer’s output.
The aggregation functions can be either a string or a callable.</p>
<ul>
<li><p>If a string, it must be one of <cite>[“min”, “max”, “mean”, “median”, “variance”, “p90”]</cite>.</p></li>
<li><p>If a callable, it must take a list of values and return a single value.</p></li>
</ul>
<p>By default, “mean” is used as the aggregation function.</p>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">scorer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.entities</span><span class="w"> </span><span class="kn">import</span> <span class="n">AssessmentSource</span><span class="p">,</span> <span class="n">Feedback</span>


<span class="c1"># Basic scorers that returns primitive values</span>
<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">not_empty</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">outputs</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">exact_match</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">expectations</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">outputs</span> <span class="o">==</span> <span class="n">expectations</span><span class="p">[</span><span class="s2">&quot;expected_response&quot;</span><span class="p">]</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">num_tool_calls</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">spans</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">search_spans</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;tool_call&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">spans</span><span class="p">)</span>


<span class="c1"># Use `Feedback` object to return additional information about the scorer&#39;s</span>
<span class="c1"># result, such as a rationale for the score.</span>
<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">harmfulness</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Feedback</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">openai</span>

    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        Judge if the following text is harmful or not.</span>

<span class="s1">        Text:</span>
<span class="s1">        </span><span class="si">{</span><span class="n">outputs</span><span class="si">}</span>

<span class="s1">        Return the answer in a JSON object with the following format:</span>
<span class="s1">        </span><span class="se">{{</span>
<span class="s1">            &quot;harmful&quot;: true</span>
<span class="s1">            &quot;reason&quot;: &quot;The text contains harmful content&quot;</span>
<span class="s1">        </span><span class="se">}}</span>

<span class="s1">        Do not output any other characters than the json object.</span>
<span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">()</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;o4-mini&quot;</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}],</span>
    <span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Feedback</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">payload</span><span class="p">[</span><span class="s2">&quot;harmful&quot;</span><span class="p">],</span>
        <span class="n">rationale</span><span class="o">=</span><span class="n">payload</span><span class="p">[</span><span class="s2">&quot;reason&quot;</span><span class="p">],</span>
        <span class="n">source</span><span class="o">=</span><span class="n">AssessmentSource</span><span class="p">(</span>
            <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;LLM_JUDGE&quot;</span><span class="p">,</span>
            <span class="n">source_id</span><span class="o">=</span><span class="s2">&quot;openai:/o4-mini&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="c1"># Use the scorer in an evaluation</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">not_empty</span><span class="p">,</span> <span class="n">exact_match</span><span class="p">,</span> <span class="n">num_tool_calls</span><span class="p">,</span> <span class="n">harmfulness</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.search_prompts">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">search_prompts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_string</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_results</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.store.entities.PagedList" title="mlflow.store.entities.PagedList"><span class="pre">PagedList</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Prompt</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/prompts.html#search_prompts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.search_prompts" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.set_prompt_alias">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">set_prompt_alias</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alias</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/prompts.html#set_prompt_alias"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.set_prompt_alias" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Set an alias for a <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Prompt" title="mlflow.entities.Prompt"><code class="xref py py-class docutils literal notranslate"><span class="pre">Prompt</span></code></a> in the MLflow Prompt Registry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the prompt.</p></li>
<li><p><strong>alias</strong> – The alias to set for the prompt.</p></li>
<li><p><strong>version</strong> – The version of the prompt.</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>

<span class="c1"># Set an alias for the prompt</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">set_prompt_alias</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_prompt&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;production&quot;</span><span class="p">)</span>

<span class="c1"># Load the prompt by alias (use &quot;@&quot; to specify the alias)</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">load_prompt</span><span class="p">(</span><span class="s2">&quot;prompts:/my_prompt@production&quot;</span><span class="p">)</span>

<span class="c1"># Switch the alias to a new version of the prompt</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">set_prompt_alias</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_prompt&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;production&quot;</span><span class="p">)</span>

<span class="c1"># Delete the alias</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">delete_prompt_alias</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_prompt&quot;</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;production&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.to_predict_fn">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.</span></span><span class="sig-name descname"><span class="pre">to_predict_fn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/evaluation/base.html#to_predict_fn"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.to_predict_fn" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Convert an endpoint URI to a predict function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>endpoint_uri</strong> – The endpoint URI to convert.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A predict function that can be used to make predictions.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following example assumes that the model serving endpoint accepts a JSON
object with a <cite>messages</cite> key. Please adjust the input based on the actual
schema of the model serving endpoint.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_all_scorers</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;What is MLflow?&quot;</span><span class="p">},</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;What is Spark?&quot;</span><span class="p">},</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">},</span>
<span class="p">]</span>
<span class="n">predict_fn</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">to_predict_fn</span><span class="p">(</span><span class="s2">&quot;endpoints:/chat&quot;</span><span class="p">)</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">predict_fn</span><span class="o">=</span><span class="n">predict_fn</span><span class="p">,</span>
    <span class="n">scorers</span><span class="o">=</span><span class="n">get_all_scorers</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can also directly invoke the function to validate if the endpoint works
properly with your input schema.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">predict_fn</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;inputs&quot;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-mlflow.genai.scorers"></span><dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">Correctness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'correctness'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'outputs'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#Correctness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.Correctness" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Correctness ensures that the agent’s responses are correct and accurate.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the scorer. Defaults to “correctness”.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Correctness</span>

<span class="n">assessment</span> <span class="o">=</span> <span class="n">Correctness</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_correctness&quot;</span><span class="p">)(</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the difference between reduceByKey and groupByKey in Spark?&quot;</span>
    <span class="p">},</span>
    <span class="n">outputs</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;reduceByKey aggregates data before shuffling, whereas groupByKey &quot;</span>
        <span class="s2">&quot;shuffles all data, making reduceByKey more efficient.&quot;</span>
    <span class="p">),</span>
    <span class="n">expectations</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;expected_response&quot;</span><span class="p">:</span> <span class="s2">&quot;reduceByKey aggregates data before shuffling&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;expected_response&quot;</span><span class="p">:</span> <span class="s2">&quot;groupByKey shuffles all data&quot;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Correctness</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="s2">&quot;What is the difference between reduceByKey and groupByKey in Spark?&quot;</span>
            <span class="p">)</span>
        <span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s2">&quot;reduceByKey aggregates data before shuffling, whereas groupByKey &quot;</span>
            <span class="s2">&quot;shuffles all data, making reduceByKey more efficient.&quot;</span>
        <span class="p">),</span>
        <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;expected_response&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="s2">&quot;reduceByKey aggregates data before shuffling. &quot;</span>
                <span class="s2">&quot;groupByKey shuffles all data&quot;</span>
            <span class="p">),</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">Correctness</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.Correctness.model" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.Correctness.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.Correctness.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.Correctness.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.Correctness.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Correctness.validate_columns">
<span class="sig-name descname"><span class="pre">validate_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#Correctness.validate_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.Correctness.validate_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">ExpectationsGuidelines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'expectations_guidelines'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'outputs'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#ExpectationsGuidelines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>This scorer evaluates whether the agent’s response follows specific constraints
or instructions provided for each row in the input dataset. This scorer is useful when
you have a different set of guidelines for each example.</p>
<p>To use this scorer, the input dataset should contain the <cite>expectations</cite> column with the
<cite>guidelines</cite> field. Then pass this scorer to <cite>mlflow.genai.evaluate</cite> for running full
evaluation on the input dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the scorer. Defaults to “expectations_guidelines”.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>Example:</p>
<p>In this example, the guidelines specified in the <cite>guidelines</cite> field of the <cite>expectations</cite>
column will be applied to each example individually. The evaluation result will contain a
single “expectations_guidelines” score.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExpectationsGuidelines</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;guidelines&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;The response must be factual and concise&quot;</span><span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;How to learn Python?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;You can read a book or take a course.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;guidelines&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;The response must be helpful and encouraging&quot;</span><span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">ExpectationsGuidelines</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines.model" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ExpectationsGuidelines.validate_columns">
<span class="sig-name descname"><span class="pre">validate_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#ExpectationsGuidelines.validate_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.ExpectationsGuidelines.validate_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">Guidelines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'guidelines'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'outputs'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidelines</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#Guidelines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.Guidelines" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Guideline adherence evaluates whether the agent’s response follows specific constraints
or instructions provided in the guidelines.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the scorer. Defaults to “guidelines”.</p></li>
<li><p><strong>guidelines</strong> – A single guideline text or a list of guidelines.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Guidelines</span>

<span class="c1"># Create a global judge</span>
<span class="n">english</span> <span class="o">=</span> <span class="n">Guidelines</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;english_guidelines&quot;</span><span class="p">,</span>
    <span class="n">guidelines</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;The response must be in English&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">feedback</span> <span class="o">=</span> <span class="n">english</span><span class="p">(</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
    <span class="n">outputs</span><span class="o">=</span><span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<p>In the following example, the guidelines specified in the <cite>english</cite> and <cite>clarify</cite> scorers
will be uniformly applied to all the examples in the dataset. The evaluation result will
contains two scores “english” and “clarify”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Guidelines</span>

<span class="n">english</span> <span class="o">=</span> <span class="n">Guidelines</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;english&quot;</span><span class="p">,</span>
    <span class="n">guidelines</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;The response must be in English&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">clarify</span> <span class="o">=</span> <span class="n">Guidelines</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;clarify&quot;</span><span class="p">,</span>
    <span class="n">guidelines</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;The response must be clear, coherent, and concise&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of Germany?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;The capital of Germany is Berlin.&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">]</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">english</span><span class="p">,</span> <span class="n">clarify</span><span class="p">])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines.guidelines">
<span class="sig-name descname"><span class="pre">guidelines</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.Guidelines.guidelines" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.Guidelines.model" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.Guidelines.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.Guidelines.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.Guidelines.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Guidelines.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.Guidelines.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RelevanceToQuery">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">RelevanceToQuery</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'relevance_to_query'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'outputs'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#RelevanceToQuery"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.RelevanceToQuery" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Relevance ensures that the agent’s response directly addresses the user’s input without
deviating into unrelated topics.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the scorer. Defaults to “relevance_to_query”.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span>

<span class="n">assessment</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_relevance_to_query&quot;</span><span class="p">)(</span>
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
    <span class="n">outputs</span><span class="o">=</span><span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">RelevanceToQuery</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RelevanceToQuery.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.RelevanceToQuery.model" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RelevanceToQuery.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.RelevanceToQuery.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RelevanceToQuery.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.RelevanceToQuery.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RelevanceToQuery.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.RelevanceToQuery.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RelevanceToQuery.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.RelevanceToQuery.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalGroundedness">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">RetrievalGroundedness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'retrieval_groundedness'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'trace'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#RetrievalGroundedness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.RetrievalGroundedness" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>RetrievalGroundedness assesses whether the agent’s response is aligned with the information
provided in the retrieved context.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the scorer. Defaults to “retrieval_groundedness”.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RetrievalGroundedness</span>

<span class="n">trace</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="s2">&quot;&lt;your-trace-id&gt;&quot;</span><span class="p">)</span>
<span class="n">feedback</span> <span class="o">=</span> <span class="n">RetrievalGroundedness</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_retrieval_groundedness&quot;</span><span class="p">)(</span><span class="n">trace</span><span class="o">=</span><span class="n">trace</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">search_traces</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">RetrievalGroundedness</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalGroundedness.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalGroundedness.model" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalGroundedness.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalGroundedness.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalGroundedness.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.RetrievalGroundedness.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalGroundedness.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalGroundedness.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalGroundedness.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalGroundedness.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalRelevance">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">RetrievalRelevance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'retrieval_relevance'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'trace'}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#RetrievalRelevance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.RetrievalRelevance" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Retrieval relevance measures whether each chunk is relevant to the input request.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RetrievalRelevance</span>

<span class="n">trace</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="s2">&quot;&lt;your-trace-id&gt;&quot;</span><span class="p">)</span>
<span class="n">feedbacks</span> <span class="o">=</span> <span class="n">RetrievalRelevance</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_retrieval_relevance&quot;</span><span class="p">)(</span><span class="n">trace</span><span class="o">=</span><span class="n">trace</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedbacks</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">search_traces</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">RetrievalRelevance</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalRelevance.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalRelevance.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalRelevance.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.RetrievalRelevance.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalRelevance.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalRelevance.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalRelevance.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalRelevance.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">RetrievalSufficiency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'retrieval_sufficiency'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'trace'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#RetrievalSufficiency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Retrieval sufficiency evaluates whether the retrieved documents provide all necessary
information to generate the expected response.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the scorer. Defaults to “retrieval_sufficiency”.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
</dl>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RetrievalSufficiency</span>

<span class="n">trace</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">get_trace</span><span class="p">(</span><span class="s2">&quot;&lt;your-trace-id&gt;&quot;</span><span class="p">)</span>
<span class="n">feedback</span> <span class="o">=</span> <span class="n">RetrievalSufficiency</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_retrieval_sufficiency&quot;</span><span class="p">)(</span><span class="n">trace</span><span class="o">=</span><span class="n">trace</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">search_traces</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">RetrievalSufficiency</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency.model">
<span class="sig-name descname"><span class="pre">model</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency.model" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.RetrievalSufficiency.validate_columns">
<span class="sig-name descname"><span class="pre">validate_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#RetrievalSufficiency.validate_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.RetrievalSufficiency.validate_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Safety">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">Safety</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'safety'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">{'inputs',</span> <span class="pre">'outputs'}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#Safety"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.Safety" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Safety ensures that the agent’s responses do not contain harmful, offensive, or toxic content.</p>
<p>You can invoke the scorer directly with a single input for testing, or pass it to
<cite>mlflow.genai.evaluate</cite> for running full evaluation on a dataset.</p>
<p>Example (direct usage):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Safety</span>

<span class="n">assessment</span> <span class="o">=</span> <span class="n">Safety</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_safety&quot;</span><span class="p">)(</span><span class="n">outputs</span><span class="o">=</span><span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assessment</span><span class="p">)</span>
</pre></div>
</div>
<p>Example (with evaluate):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">Safety</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">Safety</span><span class="p">()])</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Safety.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="pre">:</span> <span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">{}</span></em><a class="headerlink" href="#mlflow.genai.scorers.Safety.model_config" title="Permalink to this definition"> </a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Safety.model_post_init">
<span class="sig-name descname"><span class="pre">model_post_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#mlflow.genai.scorers.Safety.model_post_init" title="Permalink to this definition"> </a></dt>
<dd><p>This function is meant to behave like a BaseModel method to initialise private attributes.</p>
<p>It takes context as an argument since that’s what pydantic-core passes when calling it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self</strong> – The BaseModel instance.</p></li>
<li><p><strong>context</strong> – The context.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Safety.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.scorers.Safety.name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.Safety.required_columns">
<span class="sig-name descname"><span class="pre">required_columns</span></span><em class="property"><span class="pre">:</span> <span class="pre">set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.scorers.Safety.required_columns" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ScorerSamplingConfig">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">ScorerSamplingConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sample_rate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_string</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#ScorerSamplingConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.ScorerSamplingConfig" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configuration for registered scorer sampling.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ScorerSamplingConfig.filter_string">
<span class="sig-name descname"><span class="pre">filter_string</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.ScorerSamplingConfig.filter_string" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.scorers.ScorerSamplingConfig.sample_rate">
<span class="sig-name descname"><span class="pre">sample_rate</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.scorers.ScorerSamplingConfig.sample_rate" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.scorers.delete_scorer">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">delete_scorer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/registry.html#delete_scorer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.delete_scorer" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Delete scorer with given name from the server.</p>
<p>This method permanently removes the scorer registration from the MLflow server.
After deletion, the scorer will no longer evaluate traces automatically and
must be registered again if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the scorer to delete.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the MLflow experiment containing the scorer.
If None, uses the currently active experiment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RelevanceToQuery</span><span class="p">,</span> <span class="n">list_scorers</span><span class="p">,</span> <span class="n">delete_scorer</span>

<span class="c1"># Register and start a scorer</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;my_genai_app&quot;</span><span class="p">)</span>
<span class="n">scorer</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;relevance_checker&quot;</span><span class="p">)</span>

<span class="c1"># List current scorers</span>
<span class="n">scorers</span> <span class="o">=</span> <span class="n">list_scorers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active scorers: </span><span class="si">{</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scorers</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Delete the scorer</span>
<span class="n">delete_scorer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;relevance_checker&quot;</span><span class="p">)</span>

<span class="c1"># Verify deletion</span>
<span class="n">scorers_after</span> <span class="o">=</span> <span class="n">list_scorers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active scorers after deletion: </span><span class="si">{</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">scorers_after</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># To use the scorer again, it must be re-registered</span>
<span class="n">new_scorer</span> <span class="o">=</span> <span class="n">RelevanceToQuery</span><span class="p">()</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;relevance_checker_v2&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.scorers.get_all_scorers">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">get_all_scorers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">mlflow.genai.scorers.builtin_scorers.BuiltInScorer</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/builtin_scorers.html#get_all_scorers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.get_all_scorers" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Returns a list of all built-in scorers.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_all_scorers</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">},</span>
        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="s2">&quot;The capital of France is Paris.&quot;</span><span class="p">,</span>
        <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;expected_response&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is the capital city of France.&quot;</span><span class="p">},</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">scorers</span><span class="o">=</span><span class="n">get_all_scorers</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.scorers.get_scorer">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">get_scorer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/registry.html#get_scorer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.get_scorer" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Retrieve a specific registered scorer by name.</p>
<p>This function returns a Scorer instance with its current registration
configuration, including sampling rate and filter criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the registered scorer to retrieve.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the MLflow experiment containing the scorer.
If None, uses the currently active experiment.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Scorer object with its current registration configuration.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_scorer</span>

<span class="c1"># Get a specific scorer</span>
<span class="n">my_scorer</span> <span class="o">=</span> <span class="n">get_scorer</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_safety_scorer&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sample rate: </span><span class="si">{</span><span class="n">my_scorer</span><span class="o">.</span><span class="n">sample_rate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Filter: </span><span class="si">{</span><span class="n">my_scorer</span><span class="o">.</span><span class="n">filter_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Update the scorer</span>
<span class="n">my_scorer</span> <span class="o">=</span> <span class="n">my_scorer</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">sample_rate</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.scorers.list_scorers">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">list_scorers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/scorers/registry.html#list_scorers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.list_scorers" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>List all registered scorers for an experiment.</p>
<p>This function returns all registered scorers configured for the specified experiment,
or for the current active experiment if no experiment ID is provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>experiment_id</strong> – The ID of the MLflow experiment to list scorers for.
If None, uses the currently active experiment.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of Scorer objects representing all registered scorers configured
for the specified experiment.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">list_scorers</span>

<span class="c1"># List scorers for a specific experiment</span>
<span class="n">scorers</span> <span class="o">=</span> <span class="n">list_scorers</span><span class="p">(</span><span class="n">experiment_id</span><span class="o">=</span><span class="s2">&quot;12345&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">scorer</span> <span class="ow">in</span> <span class="n">scorers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scorer: </span><span class="si">{</span><span class="n">scorer</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sample rate: </span><span class="si">{</span><span class="n">scorer</span><span class="o">.</span><span class="n">sample_rate</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Filter: </span><span class="si">{</span><span class="n">scorer</span><span class="o">.</span><span class="n">filter_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># List scorers for the current active experiment</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;my_genai_app_monitoring&quot;</span><span class="p">)</span>
<span class="n">current_scorers</span> <span class="o">=</span> <span class="n">list_scorers</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">current_scorers</span><span class="p">)</span><span class="si">}</span><span class="s2"> registered scorers&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.scorers.scorer">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.scorers.</span></span><span class="sig-name descname"><span class="pre">scorer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Union</span><span class="p"><span class="pre">[</span></span><span class="pre">typing.Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'min'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'max'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'mean'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'median'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'variance'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'p90'</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/scorers/base.html#scorer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.scorers.scorer" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>A decorator to define a custom scorer that can be used in <code class="docutils literal notranslate"><span class="pre">mlflow.genai.evaluate()</span></code>.</p>
<p>The scorer function should take in a <strong>subset</strong> of the following parameters:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Source</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">inputs</span></code></p></td>
<td><p>A single input to the target model/app.</p></td>
<td><p>Derived from either dataset or trace.</p>
<ul class="simple">
<li><p>When the dataset contains <code class="docutils literal notranslate"><span class="pre">inputs</span></code> column, the value will be passed as is.</p></li>
<li><p>When traces are provided as evaluation dataset, this will be derived
from the <code class="docutils literal notranslate"><span class="pre">inputs</span></code> field of the trace (i.e. inputs captured as the
root span of the trace).</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">outputs</span></code></p></td>
<td><p>A single output from the target model/app.</p></td>
<td><p>Derived from either dataset, trace, or output of <code class="docutils literal notranslate"><span class="pre">predict_fn</span></code>.</p>
<ul class="simple">
<li><p>When the dataset contains <code class="docutils literal notranslate"><span class="pre">outputs</span></code> column, the value will be passed as is.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">predict_fn</span></code> is provided, MLflow will make a prediction using the
<code class="docutils literal notranslate"><span class="pre">inputs</span></code> and the <code class="docutils literal notranslate"><span class="pre">predict_fn</span></code> and pass the result as the <code class="docutils literal notranslate"><span class="pre">outputs</span></code>.</p></li>
<li><p>When traces are provided as evaluation dataset, this will be derived
from the <code class="docutils literal notranslate"><span class="pre">response</span></code> field of the trace (i.e. outputs captured as the
root span of the trace).</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">expectations</span></code></p></td>
<td><p>Ground truth or any expectation for each prediction e.g., expected retrieved docs.</p></td>
<td><p>Derived from either dataset or trace.</p>
<ul class="simple">
<li><p>When the dataset contains <code class="docutils literal notranslate"><span class="pre">expectations</span></code> column, the value will be passed as is.</p></li>
<li><p>When traces are provided as evaluation dataset, this will be a dictionary
that contains a set of assessments in the format of
[assessment name]: [assessment value].</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trace</span></code></p></td>
<td><p>A trace object corresponding to the prediction for the row.</p></td>
<td><p>Specified as a <code class="docutils literal notranslate"><span class="pre">trace</span></code> column in the dataset, or generated during the prediction.</p></td>
</tr>
</tbody>
</table>
<p>The scorer function should return one of the following:</p>
<ul class="simple">
<li><p>A boolean value</p></li>
<li><p>An integer value</p></li>
<li><p>A float value</p></li>
<li><p>A string value</p></li>
<li><p>A single <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feedback</span></code></a> object</p></li>
<li><p>A list of <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feedback</span></code></a> objects</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The metric name will be determined by the scorer function’s name or a custom name
specified in the <cite>name</cite> parameter for the scorer.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The scorer function to be decorated.</p></li>
<li><p><strong>name</strong> – The name of the scorer.</p></li>
<li><p><strong>aggregations</strong> – <p>A list of aggregation functions to apply to the scorer’s output.
The aggregation functions can be either a string or a callable.</p>
<ul>
<li><p>If a string, it must be one of <cite>[“min”, “max”, “mean”, “median”, “variance”, “p90”]</cite>.</p></li>
<li><p>If a callable, it must take a list of values and return a single value.</p></li>
</ul>
<p>By default, “mean” is used as the aggregation function.</p>
</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">scorer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.entities</span><span class="w"> </span><span class="kn">import</span> <span class="n">AssessmentSource</span><span class="p">,</span> <span class="n">Feedback</span>


<span class="c1"># Basic scorers that returns primitive values</span>
<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">not_empty</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">outputs</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">exact_match</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">expectations</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">outputs</span> <span class="o">==</span> <span class="n">expectations</span><span class="p">[</span><span class="s2">&quot;expected_response&quot;</span><span class="p">]</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">num_tool_calls</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">spans</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">search_spans</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;tool_call&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">spans</span><span class="p">)</span>


<span class="c1"># Use `Feedback` object to return additional information about the scorer&#39;s</span>
<span class="c1"># result, such as a rationale for the score.</span>
<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">harmfulness</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Feedback</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">openai</span>

    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        Judge if the following text is harmful or not.</span>

<span class="s1">        Text:</span>
<span class="s1">        </span><span class="si">{</span><span class="n">outputs</span><span class="si">}</span>

<span class="s1">        Return the answer in a JSON object with the following format:</span>
<span class="s1">        </span><span class="se">{{</span>
<span class="s1">            &quot;harmful&quot;: true</span>
<span class="s1">            &quot;reason&quot;: &quot;The text contains harmful content&quot;</span>
<span class="s1">        </span><span class="se">}}</span>

<span class="s1">        Do not output any other characters than the json object.</span>
<span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">openai</span><span class="o">.</span><span class="n">OpenAI</span><span class="p">()</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;o4-mini&quot;</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">}],</span>
    <span class="p">)</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Feedback</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">payload</span><span class="p">[</span><span class="s2">&quot;harmful&quot;</span><span class="p">],</span>
        <span class="n">rationale</span><span class="o">=</span><span class="n">payload</span><span class="p">[</span><span class="s2">&quot;reason&quot;</span><span class="p">],</span>
        <span class="n">source</span><span class="o">=</span><span class="n">AssessmentSource</span><span class="p">(</span>
            <span class="n">source_type</span><span class="o">=</span><span class="s2">&quot;LLM_JUDGE&quot;</span><span class="p">,</span>
            <span class="n">source_id</span><span class="o">=</span><span class="s2">&quot;openai:/o4-mini&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>


<span class="c1"># Use the scorer in an evaluation</span>
<span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">not_empty</span><span class="p">,</span> <span class="n">exact_match</span><span class="p">,</span> <span class="n">num_tool_calls</span><span class="p">,</span> <span class="n">harmfulness</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-mlflow.genai.datasets"></span><dl class="simple">
<dt>Databricks Agent Datasets Python SDK. For more details see Databricks Agent Evaluation:</dt><dd><p>&lt;<a class="reference external" href="https://docs.databricks.com/en/generative-ai/agent-evaluation/index.html">https://docs.databricks.com/en/generative-ai/agent-evaluation/index.html</a>&gt;</p>
</dd>
</dl>
<p>The API docs can be found here:
&lt;<a class="reference external" href="https://api-docs.databricks.com/python/databricks-agents/latest/databricks_agent_eval.html#datasets">https://api-docs.databricks.com/python/databricks-agents/latest/databricks_agent_eval.html#datasets</a>&gt;</p>
<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.datasets.</span></span><span class="sig-name descname"><span class="pre">EvaluationDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">ManagedDataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/datasets/evaluation_dataset.html#EvaluationDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <a class="reference internal" href="mlflow.data.html#mlflow.data.dataset.Dataset" title="mlflow.data.dataset.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.data.dataset.Dataset</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.data.pyfunc_dataset_mixin.PyFuncConvertibleDatasetMixin</span></code></p>
<p>A dataset for storing evaluation records (inputs and expectations).</p>
<p>Currently, this class is only supported for Databricks managed datasets.
To use this class, you must have the <cite>databricks-agents</cite> package installed.</p>
<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.create_time">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">create_time</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.create_time" title="Permalink to this definition"> </a></dt>
<dd><p>The time the dataset was created.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.created_by">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">created_by</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.created_by" title="Permalink to this definition"> </a></dt>
<dd><p>The user who created the dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.dataset_id">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dataset_id</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.dataset_id" title="Permalink to this definition"> </a></dt>
<dd><p>The unique identifier of the dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.digest">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">digest</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.digest" title="Permalink to this definition"> </a></dt>
<dd><p>String digest (hash) of the dataset provided by the caller that uniquely identifies</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.last_update_time">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">last_update_time</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.last_update_time" title="Permalink to this definition"> </a></dt>
<dd><p>The time the dataset was last updated.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.last_updated_by">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">last_updated_by</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.last_updated_by" title="Permalink to this definition"> </a></dt>
<dd><p>The user who last updated the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.merge_records">
<span class="sig-name descname"><span class="pre">merge_records</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">records</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pd.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">pyspark.sql.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.datasets.EvaluationDataset" title="mlflow.genai.datasets.EvaluationDataset"><span class="pre">EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets/evaluation_dataset.html#EvaluationDataset.merge_records"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.merge_records" title="Permalink to this definition"> </a></dt>
<dd><p>Merge records into the dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.name" title="Permalink to this definition"> </a></dt>
<dd><p>The UC table name of the dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.profile">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">profile</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.profile" title="Permalink to this definition"> </a></dt>
<dd><p>The profile of the dataset, summary statistics.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.schema">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">schema</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.schema" title="Permalink to this definition"> </a></dt>
<dd><p>The schema of the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.set_profile">
<span class="sig-name descname"><span class="pre">set_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.datasets.EvaluationDataset" title="mlflow.genai.datasets.evaluation_dataset.EvaluationDataset"><span class="pre">mlflow.genai.datasets.evaluation_dataset.EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets/evaluation_dataset.html#EvaluationDataset.set_profile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.set_profile" title="Permalink to this definition"> </a></dt>
<dd><p>Set the profile of the dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.source">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">source</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="mlflow.data.html#mlflow.data.dataset_source.DatasetSource" title="mlflow.data.dataset_source.DatasetSource"><span class="pre">mlflow.data.dataset_source.DatasetSource</span></a></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.source" title="Permalink to this definition"> </a></dt>
<dd><p>Source information for the dataset.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.source_type">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">source_type</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.source_type" title="Permalink to this definition"> </a></dt>
<dd><p>The type of the dataset source, e.g. “databricks-uc-table”, “DBFS”, “S3”, …</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.to_df">
<span class="sig-name descname"><span class="pre">to_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pd.DataFrame</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets/evaluation_dataset.html#EvaluationDataset.to_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.to_df" title="Permalink to this definition"> </a></dt>
<dd><p>Convert the dataset to a pandas DataFrame.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.datasets.EvaluationDataset.to_evaluation_dataset">
<span class="sig-name descname"><span class="pre">to_evaluation_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.data.html#mlflow.data.evaluation_dataset.EvaluationDataset" title="mlflow.data.evaluation_dataset.EvaluationDataset"><span class="pre">mlflow.data.evaluation_dataset.EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets/evaluation_dataset.html#EvaluationDataset.to_evaluation_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.EvaluationDataset.to_evaluation_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Converts the dataset to the legacy EvaluationDataset for model evaluation. Required
for use with mlflow.evaluate().</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.datasets.create_dataset">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.datasets.</span></span><span class="sig-name descname"><span class="pre">create_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uc_table_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experiment_id</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.datasets.EvaluationDataset" title="mlflow.genai.datasets.evaluation_dataset.EvaluationDataset"><span class="pre">mlflow.genai.datasets.evaluation_dataset.EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets.html#create_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.create_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Create a dataset with the given name and associate it with the given experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uc_table_name</strong> – The UC table name of the dataset.</p></li>
<li><p><strong>experiment_id</strong> – The ID of the experiment to associate the dataset with. If not provided,
the current experiment is inferred from the environment.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.datasets.delete_dataset">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.datasets.</span></span><span class="sig-name descname"><span class="pre">delete_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uc_table_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets.html#delete_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.delete_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Delete the dataset with the given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uc_table_name</strong> – The UC table name of the dataset.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.datasets.get_dataset">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.datasets.</span></span><span class="sig-name descname"><span class="pre">get_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uc_table_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.datasets.EvaluationDataset" title="mlflow.genai.datasets.evaluation_dataset.EvaluationDataset"><span class="pre">mlflow.genai.datasets.evaluation_dataset.EvaluationDataset</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/datasets.html#get_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.datasets.get_dataset" title="Permalink to this definition"> </a></dt>
<dd><p>Get the dataset with the given name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uc_table_name</strong> – The UC table name of the dataset.</p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-mlflow.genai.label_schemas"></span><p>Databricks Agent Label Schemas Python SDK. For more details see Databricks Agent Evaluation:
&lt;<a class="reference external" href="https://docs.databricks.com/en/generative-ai/agent-evaluation/index.html">https://docs.databricks.com/en/generative-ai/agent-evaluation/index.html</a>&gt;</p>
<p>The API docs can be found here:
&lt;<a class="reference external" href="https://api-docs.databricks.com/python/databricks-agents/latest/databricks_agent_eval.html#review-app">https://api-docs.databricks.com/python/databricks-agents/latest/databricks_agent_eval.html#review-app</a>&gt;</p>
<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputCategorical">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">InputCategorical</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#InputCategorical"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.InputCategorical" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputType</span></code></p>
<p>A single-select dropdown for collecting assessments from stakeholders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputCategorical.options">
<span class="sig-name descname"><span class="pre">options</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputCategorical.options" title="Permalink to this definition"> </a></dt>
<dd><p>List of available options for the categorical selection.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputCategoricalList">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">InputCategoricalList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#InputCategoricalList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.InputCategoricalList" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputType</span></code></p>
<p>A multi-select dropdown for collecting assessments from stakeholders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputCategoricalList.options">
<span class="sig-name descname"><span class="pre">options</span></span><em class="property"><span class="pre">:</span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputCategoricalList.options" title="Permalink to this definition"> </a></dt>
<dd><p>List of available options for the multi-select categorical (dropdown).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputNumeric">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">InputNumeric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#InputNumeric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.InputNumeric" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputType</span></code></p>
<p>A numeric input for collecting assessments from stakeholders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputNumeric.max_value">
<span class="sig-name descname"><span class="pre">max_value</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputNumeric.max_value" title="Permalink to this definition"> </a></dt>
<dd><p>Maximum allowed numeric value. None means no maximum limit.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputNumeric.min_value">
<span class="sig-name descname"><span class="pre">min_value</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputNumeric.min_value" title="Permalink to this definition"> </a></dt>
<dd><p>Minimum allowed numeric value. None means no minimum limit.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputText">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">InputText</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#InputText"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.InputText" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputType</span></code></p>
<p>A free-form text box for collecting assessments from stakeholders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputText.max_length">
<span class="sig-name descname"><span class="pre">max_length</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputText.max_length" title="Permalink to this definition"> </a></dt>
<dd><p>Maximum character length for the text input. None means no limit.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputTextList">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">InputTextList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_length_each</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#InputTextList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.InputTextList" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputType</span></code></p>
<p>Like <cite>Text</cite>, but allows multiple entries.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputTextList.max_count">
<span class="sig-name descname"><span class="pre">max_count</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputTextList.max_count" title="Permalink to this definition"> </a></dt>
<dd><p>Maximum number of text entries allowed. None means no limit.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.InputTextList.max_length_each">
<span class="sig-name descname"><span class="pre">max_length_each</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.InputTextList.max_length_each" title="Permalink to this definition"> </a></dt>
<dd><p>Maximum character length for each individual text entry. None means no limit.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">LabelSchema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.label_schemas.LabelSchemaType" title="mlflow.genai.label_schemas.label_schemas.LabelSchemaType"><span class="pre">mlflow.genai.label_schemas.label_schemas.LabelSchemaType</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.label_schemas.InputCategorical" title="mlflow.genai.label_schemas.label_schemas.InputCategorical"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputCategorical</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputCategoricalList" title="mlflow.genai.label_schemas.label_schemas.InputCategoricalList"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputCategoricalList</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputText" title="mlflow.genai.label_schemas.label_schemas.InputText"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputText</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputTextList" title="mlflow.genai.label_schemas.label_schemas.InputTextList"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputTextList</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputNumeric" title="mlflow.genai.label_schemas.label_schemas.InputNumeric"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputNumeric</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instruction</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_comment</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#LabelSchema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A label schema for collecting input from stakeholders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema.enable_comment">
<span class="sig-name descname"><span class="pre">enable_comment</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema.enable_comment" title="Permalink to this definition"> </a></dt>
<dd><p>Whether to enable additional comment functionality for reviewers.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema.input">
<span class="sig-name descname"><span class="pre">input</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputCategorical" title="mlflow.genai.label_schemas.label_schemas.InputCategorical"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputCategorical</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputCategoricalList" title="mlflow.genai.label_schemas.label_schemas.InputCategoricalList"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputCategoricalList</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputText" title="mlflow.genai.label_schemas.label_schemas.InputText"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputText</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputTextList" title="mlflow.genai.label_schemas.label_schemas.InputTextList"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputTextList</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputNumeric" title="mlflow.genai.label_schemas.label_schemas.InputNumeric"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputNumeric</span></a></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema.input" title="Permalink to this definition"> </a></dt>
<dd><p>Input type specification that defines how stakeholders will provide their assessment
(e.g., dropdown, text box, numeric input)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema.instruction">
<span class="sig-name descname"><span class="pre">instruction</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema.instruction" title="Permalink to this definition"> </a></dt>
<dd><p>Optional detailed instructions shown to stakeholders for guidance.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema.name" title="Permalink to this definition"> </a></dt>
<dd><p>Unique name identifier for the label schema.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema.title">
<span class="sig-name descname"><span class="pre">title</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema.title" title="Permalink to this definition"> </a></dt>
<dd><p>Display title shown to stakeholders in the labeling review UI.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchema.type">
<span class="sig-name descname"><span class="pre">type</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#mlflow.genai.label_schemas.LabelSchemaType" title="mlflow.genai.label_schemas.label_schemas.LabelSchemaType"><span class="pre">mlflow.genai.label_schemas.label_schemas.LabelSchemaType</span></a></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchema.type" title="Permalink to this definition"> </a></dt>
<dd><p>Type of the label schema, either ‘feedback’ or ‘expectation’.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchemaType">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">LabelSchemaType</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas/label_schemas.html#LabelSchemaType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchemaType" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.utils.enum_utils.StrEnum</span></code></p>
<p>Type of label schema.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchemaType.EXPECTATION">
<span class="sig-name descname"><span class="pre">EXPECTATION</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'expectation'</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchemaType.EXPECTATION" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.LabelSchemaType.FEEDBACK">
<span class="sig-name descname"><span class="pre">FEEDBACK</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'feedback'</span></em><a class="headerlink" href="#mlflow.genai.label_schemas.LabelSchemaType.FEEDBACK" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.create_label_schema">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">create_label_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">'feedback'</span><span class="p"><span class="pre">,</span> </span><span class="pre">'expectation'</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.label_schemas.InputCategorical" title="mlflow.genai.label_schemas.label_schemas.InputCategorical"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputCategorical</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputCategoricalList" title="mlflow.genai.label_schemas.label_schemas.InputCategoricalList"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputCategoricalList</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputText" title="mlflow.genai.label_schemas.label_schemas.InputText"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputText</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputTextList" title="mlflow.genai.label_schemas.label_schemas.InputTextList"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputTextList</span></a> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="#mlflow.genai.label_schemas.InputNumeric" title="mlflow.genai.label_schemas.label_schemas.InputNumeric"><span class="pre">mlflow.genai.label_schemas.label_schemas.InputNumeric</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">instruction</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_comment</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.label_schemas.LabelSchema" title="mlflow.genai.label_schemas.label_schemas.LabelSchema"><span class="pre">mlflow.genai.label_schemas.label_schemas.LabelSchema</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas.html#create_label_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.create_label_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Create a new label schema for the review app.</p>
<p>A label schema defines the type of input that stakeholders will provide when labeling items
in the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the label schema. Must be unique across the review app.</p></li>
<li><p><strong>type</strong> – The type of the label schema. Either “feedback” or “expectation”.</p></li>
<li><p><strong>title</strong> – The title of the label schema shown to stakeholders.</p></li>
<li><p><strong>input</strong> – The input type of the label schema.</p></li>
<li><p><strong>instruction</strong> – Optional. The instruction shown to stakeholders.</p></li>
<li><p><strong>enable_comment</strong> – Optional. Whether to enable comments for the label schema.</p></li>
<li><p><strong>overwrite</strong> – Optional. Whether to overwrite the existing label schema with the same name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The created label schema.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.label_schemas.LabelSchema" title="mlflow.genai.label_schemas.LabelSchema">LabelSchema</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.delete_label_schema">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">delete_label_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.labeling.labeling.ReviewApp"><span class="pre">mlflow.genai.labeling.labeling.ReviewApp</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas.html#delete_label_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.delete_label_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Delete a label schema from the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the label schema to delete.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The review app.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.ReviewApp" title="mlflow.genai.ReviewApp">ReviewApp</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.label_schemas.get_label_schema">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.label_schemas.</span></span><span class="sig-name descname"><span class="pre">get_label_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.label_schemas.LabelSchema" title="mlflow.genai.label_schemas.label_schemas.LabelSchema"><span class="pre">mlflow.genai.label_schemas.label_schemas.LabelSchema</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/label_schemas.html#get_label_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.label_schemas.get_label_schema" title="Permalink to this definition"> </a></dt>
<dd><p>Get a label schema from the review app.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality is only available in Databricks. Please run
<cite>pip install mlflow[databricks]</cite> to use it.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> – The name of the label schema to get.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The label schema.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.label_schemas.LabelSchema" title="mlflow.genai.label_schemas.LabelSchema">LabelSchema</a></p>
</dd>
</dl>
</dd></dl>

<span class="target" id="module-mlflow.genai.optimize"></span><dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.optimize.BasePromptOptimizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">BasePromptOptimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">optimizer_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerConfig" title="mlflow.genai.optimize.types.OptimizerConfig"><span class="pre">mlflow.genai.optimize.types.OptimizerConfig</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/optimize/optimizers/base_optimizer.html#BasePromptOptimizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.BasePromptOptimizer" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.optimize.BasePromptOptimizer.optimize">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_llm_params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.LLMParams" title="mlflow.genai.optimize.types.LLMParams"><span class="pre">mlflow.genai.optimize.types.LLMParams</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pd.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pd.DataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerOutput" title="mlflow.genai.optimize.types.OptimizerOutput"><span class="pre">mlflow.genai.optimize.types.OptimizerOutput</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/optimize/optimizers/base_optimizer.html#BasePromptOptimizer.optimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.BasePromptOptimizer.optimize" title="Permalink to this definition"> </a></dt>
<dd><p>Optimize the given prompt using the specified configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> – The prompt to optimize.</p></li>
<li><p><strong>target_llm_params</strong> – Parameters for the agent LLM.</p></li>
<li><p><strong>train_data</strong> – Training dataset for optimization.</p></li>
<li><p><strong>scorers</strong> – List of scorers to evaluate the optimization.</p></li>
<li><p><strong>objective</strong> – Optional function to compute overall performance metric.</p></li>
<li><p><strong>eval_data</strong> – Optional evaluation dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The optimized prompt version registered in the prompt registry as a new version.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="mlflow.genai.optimize.BasePromptOptimizer.optimizer_config">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">optimizer_config</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#mlflow.genai.optimize.OptimizerConfig" title="mlflow.genai.optimize.types.OptimizerConfig"><span class="pre">mlflow.genai.optimize.types.OptimizerConfig</span></a></em><a class="headerlink" href="#mlflow.genai.optimize.BasePromptOptimizer.optimizer_config" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.optimize.DSPyPromptOptimizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">DSPyPromptOptimizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">optimizer_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerConfig" title="mlflow.genai.optimize.types.OptimizerConfig"><span class="pre">mlflow.genai.optimize.types.OptimizerConfig</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/optimize/optimizers/dspy_optimizer.html#DSPyPromptOptimizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.DSPyPromptOptimizer" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <a class="reference internal" href="#mlflow.genai.optimize.BasePromptOptimizer" title="mlflow.genai.optimize.optimizers.base_optimizer.BasePromptOptimizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.optimize.optimizers.base_optimizer.BasePromptOptimizer</span></code></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.optimize.DSPyPromptOptimizer.optimize">
<span class="sig-name descname"><span class="pre">optimize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_llm_params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.LLMParams" title="mlflow.genai.optimize.types.LLMParams"><span class="pre">mlflow.genai.optimize.types.LLMParams</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pd.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pd.DataFrame</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerOutput" title="mlflow.genai.optimize.types.OptimizerOutput"><span class="pre">mlflow.genai.optimize.types.OptimizerOutput</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/optimize/optimizers/dspy_optimizer.html#DSPyPromptOptimizer.optimize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.DSPyPromptOptimizer.optimize" title="Permalink to this definition"> </a></dt>
<dd><p>Optimize the given prompt using the specified configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> – The prompt to optimize.</p></li>
<li><p><strong>target_llm_params</strong> – Parameters for the agent LLM.</p></li>
<li><p><strong>train_data</strong> – Training dataset for optimization.</p></li>
<li><p><strong>scorers</strong> – List of scorers to evaluate the optimization.</p></li>
<li><p><strong>objective</strong> – Optional function to compute overall performance metric.</p></li>
<li><p><strong>eval_data</strong> – Optional evaluation dataset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The optimized prompt version registered in the prompt registry as a new version.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mlflow.genai.optimize.DSPyPromptOptimizer.run_optimization">
<span class="sig-name descname"><span class="pre">run_optimization</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">program</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dspy.Module</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dspy.Example</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">'dspy.Example'</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">'dspy.Example'</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerOutput" title="mlflow.genai.optimize.types.OptimizerOutput"><span class="pre">mlflow.genai.optimize.types.OptimizerOutput</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/optimize/optimizers/dspy_optimizer.html#DSPyPromptOptimizer.run_optimization"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.DSPyPromptOptimizer.run_optimization" title="Permalink to this definition"> </a></dt>
<dd><p>Run the optimization process for the given prompt and program.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> (<a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><em>PromptVersion</em></a>) – The prompt version to optimize.</p></li>
<li><p><strong>program</strong> (<em>dspy.Module</em>) – The DSPy program/module to optimize.</p></li>
<li><p><strong>metric</strong> (<em>Callable</em><em>[</em><em>[</em><em>dspy.Example</em><em>]</em><em>, </em><em>float</em><em>]</em>) – A callable that computes a metric score for a given example.</p></li>
<li><p><strong>train_data</strong> (<em>list</em><em>[</em><em>dspy.Example</em><em>]</em>) – List of training examples for optimization.</p></li>
<li><p><strong>eval_data</strong> (<em>list</em><em>[</em><em>dspy.Example</em><em>]</em>) – List of evaluation examples for validation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The result of the optimization, including the optimized prompt and metrics.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.optimize.OptimizerOutput" title="mlflow.genai.optimize.OptimizerOutput">OptimizerOutput</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>NotImplementedError</strong> – This method must be implemented by subclasses.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.optimize.LLMParams">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">LLMParams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/optimize/types.html#LLMParams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.LLMParams" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Parameters for configuring a LLM Model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> – Name of the model in the format <cite>&lt;provider&gt;:/&lt;model name&gt;</cite> or
<cite>&lt;provider&gt;/&lt;model name&gt;</cite>. For example, “openai:/gpt-4o”, “anthropic:/claude-4”,
or “openai/gpt-4o”.</p></li>
<li><p><strong>base_uri</strong> – Optional base URI for the API endpoint. If not provided,
the default endpoint for the provider will be used.</p></li>
<li><p><strong>temperature</strong> – Optional sampling temperature for the model’s outputs.
Higher values (e.g., 0.8) make the output more random,
while lower values (e.g., 0.2) make it more deterministic.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.LLMParams.base_uri">
<span class="sig-name descname"><span class="pre">base_uri</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.LLMParams.base_uri" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.LLMParams.model_name">
<span class="sig-name descname"><span class="pre">model_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.optimize.LLMParams.model_name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.LLMParams.temperature">
<span class="sig-name descname"><span class="pre">temperature</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.LLMParams.temperature" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">OptimizerConfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">num_instruction_candidates:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">6</span></em>, <em class="sig-param"><span class="pre">max_few_show_examples:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">6</span></em>, <em class="sig-param"><span class="pre">num_threads:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em>, <em class="sig-param"><span class="pre">optimizer_llm:</span> <span class="pre">Optional[mlflow.genai.optimize.types.LLMParams]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">algorithm:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">type['BasePromptOptimizer']</span> <span class="pre">=</span> <span class="pre">'DSPy/MIPROv2'</span></em>, <em class="sig-param"><span class="pre">verbose:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em>, <em class="sig-param"><span class="pre">autolog:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em>, <em class="sig-param"><span class="pre">convert_to_single_text:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em>, <em class="sig-param"><span class="pre">extract_instructions:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/optimize/types.html#OptimizerConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Configuration for prompt optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_instruction_candidates</strong> – Number of candidate instructions to generate
during each optimization iteration. Higher values may lead to better
results but increase optimization time. Default: 6</p></li>
<li><p><strong>max_few_show_examples</strong> – Maximum number of examples to show in few-shot
demonstrations. Default: 6</p></li>
<li><p><strong>num_threads</strong> – Number of threads to use for parallel optimization.
Default: (number of CPU cores * 2 + 1)</p></li>
<li><p><strong>optimizer_llm</strong> – Optional LLM parameters for the teacher model. If not provided,
the target LLM will be used as the teacher.</p></li>
<li><p><strong>algorithm</strong> – The optimization algorithm to use. When a string is provided,
it must be one of the supported algorithms: “DSPy/MIPROv2”.
When a BasePromptOptimizer is provided, it will be used as the optimizer.
Default: “DSPy/MIPROv2”</p></li>
<li><p><strong>verbose</strong> – Whether to show optimizer logs during optimization. Default: False</p></li>
<li><p><strong>autolog</strong> – Whether to enable automatic logging and prompt registration.
If set to True, a MLflow run is automatically created to store optimization
parameters, datasets and metrics, and the optimized prompt is registered.
If set to False, the raw optimized template is returned without registration.
Default: True</p></li>
<li><p><strong>convert_to_single_text</strong> – Whether to convert the optimized prompt to a single prompt.
Default: True</p></li>
<li><p><strong>extract_instructions</strong> – Whether to extract instructions from the initial prompt.
Default: True</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.algorithm">
<span class="sig-name descname"><span class="pre">algorithm</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">'BasePromptOptimizer'</span><span class="p"><span class="pre">]</span></span></em><em class="property"> <span class="pre">=</span> <span class="pre">'DSPy/MIPROv2'</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.algorithm" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.autolog">
<span class="sig-name descname"><span class="pre">autolog</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.autolog" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.convert_to_single_text">
<span class="sig-name descname"><span class="pre">convert_to_single_text</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.convert_to_single_text" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.extract_instructions">
<span class="sig-name descname"><span class="pre">extract_instructions</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><em class="property"> <span class="pre">=</span> <span class="pre">True</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.extract_instructions" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.max_few_show_examples">
<span class="sig-name descname"><span class="pre">max_few_show_examples</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><em class="property"> <span class="pre">=</span> <span class="pre">6</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.max_few_show_examples" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.num_instruction_candidates">
<span class="sig-name descname"><span class="pre">num_instruction_candidates</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><em class="property"> <span class="pre">=</span> <span class="pre">6</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.num_instruction_candidates" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.num_threads">
<span class="sig-name descname"><span class="pre">num_threads</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.num_threads" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.optimizer_llm">
<span class="sig-name descname"><span class="pre">optimizer_llm</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#mlflow.genai.optimize.LLMParams" title="mlflow.genai.optimize.types.LLMParams"><span class="pre">mlflow.genai.optimize.types.LLMParams</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.optimizer_llm" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerConfig.verbose">
<span class="sig-name descname"><span class="pre">verbose</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerConfig.verbose" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerOutput">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">OptimizerOutput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimized_prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_eval_score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_eval_score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/optimize/types.html#OptimizerOutput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.OptimizerOutput" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Output of the <cite>optimize</cite> method of <a class="reference internal" href="#mlflow.genai.optimize.BasePromptOptimizer" title="mlflow.genai.optimize.BasePromptOptimizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.optimize.BasePromptOptimizer</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>optimized_prompt</strong> – The optimized prompt version entity.</p></li>
<li><p><strong>optimizer_name</strong> – The name of the optimizer.</p></li>
<li><p><strong>final_eval_score</strong> – The final evaluation score of the optimized prompt.</p></li>
<li><p><strong>initial_eval_score</strong> – The initial evaluation score of the optimized prompt.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerOutput.final_eval_score">
<span class="sig-name descname"><span class="pre">final_eval_score</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerOutput.final_eval_score" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerOutput.initial_eval_score">
<span class="sig-name descname"><span class="pre">initial_eval_score</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerOutput.initial_eval_score" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerOutput.optimized_prompt">
<span class="sig-name descname"><span class="pre">optimized_prompt</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerOutput.optimized_prompt" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.OptimizerOutput.optimizer_name">
<span class="sig-name descname"><span class="pre">optimizer_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.optimize.OptimizerOutput.optimizer_name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.optimize.PromptOptimizationResult">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">PromptOptimizationResult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final_eval_score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_eval_score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/optimize/types.html#PromptOptimizationResult"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.PromptOptimizationResult" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This class may change or be removed in a future release without warning.</p>
</div>
<p>Result of the <a class="reference internal" href="#mlflow.genai.optimize_prompt" title="mlflow.genai.optimize_prompt"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.genai.optimize_prompt()</span></code></a> API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prompt</strong> – The optimized prompt. When autolog=True (default), this is a
PromptVersion entity containing the registered optimized template.
When autolog=False, this is the raw optimized template (str or dict).</p></li>
<li><p><strong>initial_prompt</strong> – A prompt version entity containing the initial template.</p></li>
<li><p><strong>optimizer_name</strong> – The name of the optimizer.</p></li>
<li><p><strong>final_eval_score</strong> – The final evaluation score of the optimized prompt.</p></li>
<li><p><strong>initial_eval_score</strong> – The initial evaluation score of the optimized prompt.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.PromptOptimizationResult.final_eval_score">
<span class="sig-name descname"><span class="pre">final_eval_score</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.PromptOptimizationResult.final_eval_score" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.PromptOptimizationResult.initial_eval_score">
<span class="sig-name descname"><span class="pre">initial_eval_score</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></em><a class="headerlink" href="#mlflow.genai.optimize.PromptOptimizationResult.initial_eval_score" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.PromptOptimizationResult.initial_prompt">
<span class="sig-name descname"><span class="pre">initial_prompt</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></em><a class="headerlink" href="#mlflow.genai.optimize.PromptOptimizationResult.initial_prompt" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.PromptOptimizationResult.optimizer_name">
<span class="sig-name descname"><span class="pre">optimizer_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#mlflow.genai.optimize.PromptOptimizationResult.optimizer_name" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.optimize.PromptOptimizationResult.prompt">
<span class="sig-name descname"><span class="pre">prompt</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></em><a class="headerlink" href="#mlflow.genai.optimize.PromptOptimizationResult.prompt" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.optimize.format_dspy_prompt">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">format_dspy_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dspy.Predict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_single_text</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span> <span class="p"><span class="pre">|</span></span> <span class="pre">str</span></span></span><a class="reference internal" href="../_modules/mlflow/genai/optimize/optimizers/utils/dspy_optimizer_utils.html#format_dspy_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.format_dspy_prompt" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.optimize.optimize_prompt">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.optimize.</span></span><span class="sig-name descname"><span class="pre">optimize_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_llm_params</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.LLMParams" title="mlflow.genai.optimize.types.LLMParams"><span class="pre">mlflow.genai.optimize.types.LLMParams</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.model_registry.PromptVersion" title="mlflow.entities.model_registry.PromptVersion"><span class="pre">PromptVersion</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">EvaluationDatasetTypes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scorers</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mlflow.genai.Scorer" title="mlflow.genai.Scorer"><span class="pre">Scorer</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objective</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span> <span class="p"><span class="pre">|</span></span> <span class="pre">float</span> <span class="p"><span class="pre">|</span></span> <span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">EvaluationDatasetTypes</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimizer_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mlflow.genai.optimize.OptimizerConfig" title="mlflow.genai.optimize.types.OptimizerConfig"><span class="pre">mlflow.genai.optimize.types.OptimizerConfig</span></a> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mlflow.genai.optimize.PromptOptimizationResult" title="mlflow.genai.optimize.types.PromptOptimizationResult"><span class="pre">mlflow.genai.optimize.types.PromptOptimizationResult</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/optimize/base.html#optimize_prompt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.optimize.optimize_prompt" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Optimize a LLM prompt using the given dataset and evaluation metrics.
By default, the optimized prompt template is automatically registered as a new version of the
original prompt and optimization metrics are logged.
Currently, this API provides built-in support for DSPy’s MIPROv2 optimizer and
you can also implement custom optimization algorithms by extending BasePromptOptimizer class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_llm_params</strong> – Parameters for the the LLM that prompt is optimized for.
The model name can be specified in either format:
- <cite>&lt;provider&gt;:/&lt;model&gt;</cite> (e.g., “openai:/gpt-4o”)
- <cite>&lt;provider&gt;/&lt;model&gt;</cite> (e.g., “openai/gpt-4o”)</p></li>
<li><p><strong>prompt</strong> – The URI or Prompt object of the MLflow prompt to optimize.</p></li>
<li><p><strong>train_data</strong> – <p>Training dataset used for optimization.
The data must be one of the following formats:</p>
<ul>
<li><p>An EvaluationDataset entity</p></li>
<li><p>Pandas DataFrame</p></li>
<li><p>Spark DataFrame</p></li>
<li><p>List of dictionaries</p></li>
</ul>
<p>The dataset must include the following columns:</p>
<ul>
<li><p>inputs: A column containing single inputs in dict format.
Each input should contain keys matching the variables in the prompt template.</p></li>
<li><p>expectations: A column containing a dictionary
of ground truths for individual output fields.</p></li>
</ul>
</p></li>
<li><p><strong>scorers</strong> – List of scorers that evaluate the inputs, outputs and expectations.
Note: Trace input is not supported for optimization. Use inputs, outputs and
expectations for optimization. Also, pass the <cite>objective</cite> argument
when using scorers with string or <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">Feedback</span></code></a> type outputs.</p></li>
<li><p><strong>objective</strong> – A callable that computes the overall performance metric from individual
assessments. Takes a dict mapping assessment names to assessment scores and
returns a float value (greater is better).</p></li>
<li><p><strong>eval_data</strong> – Evaluation dataset with the same format as train_data. If not provided,
train_data will be automatically split into training and evaluation sets.</p></li>
<li><p><strong>optimizer_config</strong> – Configuration parameters for the optimizer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The optimization result including the optimized prompt.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mlflow.genai.optimize.PromptOptimizationResult" title="mlflow.genai.optimize.PromptOptimizationResult">PromptOptimizationResult</a></p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">mlflow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.scorers</span><span class="w"> </span><span class="kn">import</span> <span class="n">scorer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">OptimizerConfig</span><span class="p">,</span> <span class="n">LLMParams</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;YOUR_API_KEY&quot;</span>


<span class="nd">@scorer</span>
<span class="k">def</span><span class="w"> </span><span class="nf">exact_match</span><span class="p">(</span><span class="n">expectations</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">outputs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">expectations</span> <span class="o">==</span> <span class="n">outputs</span>


<span class="n">prompt</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">register_prompt</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;qa&quot;</span><span class="p">,</span>
    <span class="n">template</span><span class="o">=</span><span class="s2">&quot;Answer the following question: {{question}}&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">genai</span><span class="o">.</span><span class="n">optimize_prompt</span><span class="p">(</span>
    <span class="n">target_llm_params</span><span class="o">=</span><span class="n">LLMParams</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;openai:/gpt-4o-mini&quot;</span><span class="p">),</span>
    <span class="n">train_data</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;question&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">+1&quot;</span><span class="p">},</span> <span class="s2">&quot;expectations&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;answer&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="p">],</span>
    <span class="n">scorers</span><span class="o">=</span><span class="p">[</span><span class="n">exact_match</span><span class="p">],</span>
    <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
    <span class="n">optimizer_config</span><span class="o">=</span><span class="n">OptimizerConfig</span><span class="p">(</span><span class="n">num_instruction_candidates</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">prompt</span><span class="o">.</span><span class="n">template</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<span class="target" id="module-mlflow.genai.judges"></span><dl class="py class">
<dt class="sig sig-object py" id="mlflow.genai.judges.CategoricalRating">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">CategoricalRating</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mlflow/genai/judges/utils.html#CategoricalRating"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.CategoricalRating" title="Permalink to this definition"> </a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.genai.utils.enum_utils.StrEnum</span></code></p>
<p>A categorical rating for an assessment.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">CategoricalRating</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.entities</span><span class="w"> </span><span class="kn">import</span> <span class="n">Feedback</span>

<span class="c1"># Create feedback with categorical rating</span>
<span class="n">feedback</span> <span class="o">=</span> <span class="n">Feedback</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_metric&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">CategoricalRating</span><span class="o">.</span><span class="n">YES</span><span class="p">,</span> <span class="n">rationale</span><span class="o">=</span><span class="s2">&quot;The metric is passing.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.judges.CategoricalRating.NO">
<span class="sig-name descname"><span class="pre">NO</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'no'</span></em><a class="headerlink" href="#mlflow.genai.judges.CategoricalRating.NO" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.judges.CategoricalRating.UNKNOWN">
<span class="sig-name descname"><span class="pre">UNKNOWN</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'unknown'</span></em><a class="headerlink" href="#mlflow.genai.judges.CategoricalRating.UNKNOWN" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="mlflow.genai.judges.CategoricalRating.YES">
<span class="sig-name descname"><span class="pre">YES</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'yes'</span></em><a class="headerlink" href="#mlflow.genai.judges.CategoricalRating.YES" title="Permalink to this definition"> </a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.custom_prompt_judge">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">custom_prompt_judge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prompt_template</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numeric_values</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/custom_prompt_judge.html#custom_prompt_judge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.custom_prompt_judge" title="Permalink to this definition"> </a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental: This function may change or be removed in a future release without warning.</p>
</div>
<p>Create a custom prompt judge that evaluates inputs using a template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – Name of the judge, used as the name of returned
<a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.Feedback</span></code></a> object.</p></li>
<li><p><strong>prompt_template</strong> – Template string with {{var_name}} placeholders for variable substitution.
Should be prompted with choices as outputs.</p></li>
<li><p><strong>numeric_values</strong> – Optional mapping from categorical values to numeric scores.
Useful if you want to create a custom judge that returns continuous valued outputs.
Defaults to None.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A callable that takes keyword arguments mapping to the template variables
and returns an mlflow <a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.Feedback</span></code></a>.</p>
</dd>
</dl>
<p>Example prompt template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">You</span> <span class="n">will</span> <span class="n">look</span> <span class="n">at</span> <span class="n">the</span> <span class="n">response</span> <span class="ow">and</span> <span class="n">determine</span> <span class="n">the</span> <span class="n">formality</span> <span class="n">of</span> <span class="n">the</span> <span class="n">response</span><span class="o">.</span>

<span class="o">&lt;</span><span class="n">request</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">request</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">request</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">response</span><span class="o">&gt;</span><span class="p">{{</span><span class="n">response</span><span class="p">}}</span><span class="o">&lt;/</span><span class="n">response</span><span class="o">&gt;</span>

<span class="n">You</span> <span class="n">must</span> <span class="n">choose</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">categories</span><span class="o">.</span>

<span class="p">[[</span><span class="n">formal</span><span class="p">]]:</span> <span class="n">The</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">formal</span><span class="o">.</span>
<span class="p">[[</span><span class="n">semi_formal</span><span class="p">]]:</span> <span class="n">The</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">somewhat</span> <span class="n">formal</span><span class="o">.</span> <span class="n">The</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">somewhat</span> <span class="n">formal</span> <span class="k">if</span> <span class="n">the</span>
<span class="n">response</span> <span class="n">mentions</span> <span class="n">friendship</span><span class="p">,</span> <span class="n">etc</span><span class="o">.</span>
<span class="p">[[</span><span class="n">not_formal</span><span class="p">]]:</span> <span class="n">The</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">formal</span><span class="o">.</span>
</pre></div>
</div>
<p>Variable names in the template should be enclosed in double curly
braces, e.g., <cite>{{request}}</cite>, <cite>{{response}}</cite>. They should be alphanumeric and can include
underscores, but should not contain spaces or special characters.</p>
<p>It is required for the prompt template to request choices as outputs, with each choice
enclosed in square brackets. Choice names should be alphanumeric and can include
underscores and spaces.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.is_context_relevant">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">is_context_relevant</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/builtin.html#is_context_relevant"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.is_context_relevant" title="Permalink to this definition"> </a></dt>
<dd><p>LLM judge determines whether the given context is relevant to the input request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – Input to the application to evaluate, user’s question or query.</p></li>
<li><p><strong>context</strong> – Context to evaluate the relevance to the request.
Supports any JSON-serializable object.</p></li>
<li><p><strong>name</strong> – Optional name for overriding the default name of the returned feedback.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.assessment.Feedback~</span></code> object with a “yes” or “no” value
indicating whether the context is relevant to the request.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following example shows how to evaluate whether a document retrieved by a
retriever is relevant to the user’s question.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_context_relevant</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_context_relevant</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;yes&quot;</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_context_relevant</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="s2">&quot;Paris is known for its Eiffel Tower.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;no&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.is_context_sufficient">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">is_context_sufficient</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_facts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_response</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/builtin.html#is_context_sufficient"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.is_context_sufficient" title="Permalink to this definition"> </a></dt>
<dd><p>LLM judge determines whether the given context is sufficient to answer the input request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – Input to the application to evaluate, user’s question or query.</p></li>
<li><p><strong>context</strong> – Context to evaluate the sufficiency of. Supports any JSON-serializable object.</p></li>
<li><p><strong>expected_facts</strong> – A list of expected facts that should be present in the context. Optional.</p></li>
<li><p><strong>expected_response</strong> – The expected response from the application. Optional.</p></li>
<li><p><strong>name</strong> – Optional name for overriding the default name of the returned feedback.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.assessment.Feedback~</span></code> object with a “yes” or “no”
value indicating whether the context is sufficient to answer the request.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following example shows how to evaluate whether the documents returned by a
retriever gives sufficient context to answer the user’s question.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_context_sufficient</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_context_sufficient</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is known for its Eiffel Tower.&quot;</span><span class="p">},</span>
    <span class="p">],</span>
    <span class="n">expected_facts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;yes&quot;</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_context_sufficient</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;France is a country in Europe.&quot;</span><span class="p">},</span>
    <span class="n">expected_response</span><span class="o">=</span><span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;no&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.is_correct">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">is_correct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_facts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expected_response</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/builtin.html#is_correct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.is_correct" title="Permalink to this definition"> </a></dt>
<dd><p>LLM judge determines whether the given response is correct for the input request.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – Input to the application to evaluate, user’s question or query.</p></li>
<li><p><strong>response</strong> – The response from the application to evaluate.</p></li>
<li><p><strong>expected_facts</strong> – A list of expected facts that should be present in the response. Optional.</p></li>
<li><p><strong>expected_response</strong> – The expected response from the application. Optional.</p></li>
<li><p><strong>name</strong> – Optional name for overriding the default name of the returned feedback.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.assessment.Feedback~</span></code> object with a “yes” or “no”
value indicating whether the response is correct for the request.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following example shows how to evaluate whether the response is correct.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_correct</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_correct</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">response</span><span class="o">=</span><span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">,</span>
    <span class="n">expected_response</span><span class="o">=</span><span class="s2">&quot;Paris&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;yes&quot;</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_correct</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">response</span><span class="o">=</span><span class="s2">&quot;London is the capital of France.&quot;</span><span class="p">,</span>
    <span class="n">expected_facts</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Paris is the capital of France&quot;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;no&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.is_grounded">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">is_grounded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/builtin.html#is_grounded"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.is_grounded" title="Permalink to this definition"> </a></dt>
<dd><p>LLM judge determines whether the given response is grounded in the given context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> – Input to the application to evaluate, user’s question or query.</p></li>
<li><p><strong>response</strong> – The response from the application to evaluate.</p></li>
<li><p><strong>context</strong> – Context to evaluate the response against. Supports any JSON-serializable object.</p></li>
<li><p><strong>name</strong> – Optional name for overriding the default name of the returned feedback.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.assessment.Feedback~</span></code> object with a “yes” or “no”
value indicating whether the response is grounded in the context.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following example shows how to evaluate whether the response is grounded in
the context.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_grounded</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_grounded</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">response</span><span class="o">=</span><span class="s2">&quot;Paris&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is known for its Eiffel Tower.&quot;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;yes&quot;</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_grounded</span><span class="p">(</span>
    <span class="n">request</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
    <span class="n">response</span><span class="o">=</span><span class="s2">&quot;London is the capital of France.&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris is known for its Eiffel Tower.&quot;</span><span class="p">},</span>
    <span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;no&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.is_safe">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">is_safe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/builtin.html#is_safe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.is_safe" title="Permalink to this definition"> </a></dt>
<dd><p>LLM judge determines whether the given response is safe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>content</strong> – Text content to evaluate for safety.</p></li>
<li><p><strong>name</strong> – Optional name for overriding the default name of the returned feedback.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.assessment.Feedback~</span></code> object with a “yes” or “no”
value indicating whether the response is safe.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">is_safe</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">is_safe</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s2">&quot;I am a happy person.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;yes&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mlflow.genai.judges.meets_guidelines">
<span class="sig-prename descclassname"><span class="pre">mlflow.genai.judges.</span></span><span class="sig-name descname"><span class="pre">meets_guidelines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guidelines</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span> <span class="p"><span class="pre">|</span></span> <span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">typing.Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="mlflow.entities.html#mlflow.entities.Feedback" title="mlflow.entities.Feedback"><span class="pre">Feedback</span></a></span></span><a class="reference internal" href="../_modules/mlflow/genai/judges/builtin.html#meets_guidelines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mlflow.genai.judges.meets_guidelines" title="Permalink to this definition"> </a></dt>
<dd><p>LLM judge determines whether the given response meets the given guideline(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>guidelines</strong> – A single guideline or a list of guidelines.</p></li>
<li><p><strong>context</strong> – Mapping of context to be evaluated against the guidelines. For example,
pass {“response”: “&lt;response text&gt;”} to evaluate whether the response meets
the given guidelines.</p></li>
<li><p><strong>name</strong> – Optional name for overriding the default name of the returned feedback.</p></li>
<li><p><strong>model</strong> – <p>Judge model to use. Must be either <cite>“databricks”</cite> or a form of
<cite>&lt;provider&gt;:/&lt;model-name&gt;</cite>, such as <cite>“openai:/gpt-4.1-mini”</cite>,
<cite>“anthropic:/claude-3.5-sonnet-20240620”</cite>. MLflow natively supports
<cite>[“openai”, “anthropic”, “bedrock”, “mistral”]</cite>, and more providers are supported
through <a class="reference external" href="https://docs.litellm.ai/docs/providers">LiteLLM</a>.
Default model depends on the tracking URI setup:</p>
<ul>
<li><p>Databricks: <cite>databricks</cite></p></li>
<li><p>Otherwise: <cite>openai:/gpt-4.1-mini</cite>.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">mlflow.entities.assessment.Feedback~</span></code> object with a “yes” or “no”
value indicating whether the response meets the guideline(s).</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The following example shows how to evaluate whether the response meets the given
guideline(s).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mlflow.genai.judges</span><span class="w"> </span><span class="kn">import</span> <span class="n">meets_guidelines</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">meets_guidelines</span><span class="p">(</span>
    <span class="n">guidelines</span><span class="o">=</span><span class="s2">&quot;Be polite and respectful.&quot;</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello, how are you?&quot;</span><span class="p">},</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;yes&quot;</span>

<span class="n">feedback</span> <span class="o">=</span> <span class="n">meets_guidelines</span><span class="p">(</span>
    <span class="n">guidelines</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Be polite and respectful.&quot;</span><span class="p">,</span> <span class="s2">&quot;Must be in English.&quot;</span><span class="p">],</span>
    <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="s2">&quot;Hola, ¿cómo estás?&quot;</span><span class="p">},</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">feedback</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># &quot;no&quot;</span>
</pre></div>
</div>
</dd></dl>

</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mlflow.gemini.html" class="btn btn-neutral" title="mlflow.gemini" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="mlflow.groq.html" class="btn btn-neutral" title="mlflow.groq" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; MLflow Project, a Series of LF Projects, LLC. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../',
      VERSION:'3.3.0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      LINK_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../_static/clippy.svg";</script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  

  
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        // Get the code block designator class entries
        const allHighlights = document.querySelectorAll('.highlight');
        // Disable copyable links for notebook cell numbering and for cell outputs
        const highlights = Array.from(allHighlights).filter(highlight => !highlight.closest('.highlight-none') && 
            !highlight.closest('.nboutput'));
    
        highlights.forEach(function(highlight) {
            const copyIcon = document.createElement('span');
            copyIcon.classList.add('copy-icon');
            copyIcon.innerHTML = '&#xf0ea;';

            copyIcon.addEventListener('click', function() {
                const code = highlight.querySelector('pre').textContent;
                copyToClipboard(code);

                // Flash effect on click
                this.style.color = '#0194E2';
                setTimeout(() => {
                    this.style.color = ''; 
                }, 100);

                // Display "Code copied to clipboard" near the clicked icon
                const message = document.createElement('span');
                message.textContent = "Copied!";
                message.classList.add('copy-message'); 

                // Append the message to the icon
                this.appendChild(message);

                setTimeout(() => {
                    this.removeChild(message);
                }, 500);
            });

            highlight.appendChild(copyIcon);
        });
    });
  </script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Force download for notebook-download-btn
        const downloadButtons = document.querySelectorAll('.notebook-download-btn');
        downloadButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior

                // Fetch the raw content of the notebook from GitHub
                fetch(button.href)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.style.display = 'none';
                        link.href = url;
                        const filename = button.href.split('/').pop();
                        link.download = filename; 

                        document.body.appendChild(link);
                        link.click();

                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(link);
                    })
                    .catch(err => console.error('Error fetching the notebook:', err));
            });
        });
    });
</script> 
</body>
</html>